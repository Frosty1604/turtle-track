import{A as Ke,Aa as vn,B as le,Ba as Ct,Ca as Dt,Da as q,Ga as ie,Ha as Y,I as y,Ia as _n,Ja as yn,Ka as re,L as Se,La as L,M as S,Ma as pe,Oa as Cn,Qa as bt,S as N,Sa as Et,T as yt,U as E,V as z,W as cn,Y as Ae,Z as un,a as He,aa as dn,c as he,d as K,e as vt,ea as hn,eb as Dn,fa as k,fb as bn,g as Q,ga as R,gb as ge,ha as fn,hb as U,i as g,ia as mn,ib as Ze,ja as pn,ka as Z,kb as En,la as h,ma as f,n as sn,na as A,o as an,oa as $,p as D,pa as C,q as b,qa as G,r as ln,ra as fe,s as _t,sa as me,t as We,ta as ze,u as qe,ua as Me,va as _,wa as gn,x as I,xa as ee,ya as te,z as we,za as ne}from"./chunk-4F6X2NIL.js";import{E as Be,F as tn,M as nn,O as rn,Q as on,f as Zt,h as Yt,j as Ue,l as Xt,q as T,r as de,w as Jt,x as Qt,z as en}from"./chunk-L6B6EH3K.js";import{a as M,b as P}from"./chunk-PFHXWNFC.js";var X=(()=>{class n{#e=g(Dn).db;save=e=>(typeof e=="string"&&(e=Number(e)),this.#e.odo.insert({id:crypto.randomUUID(),odo:e,dateTime:new Date().toISOString()}));findAll=(e="asc")=>this.#e.odo.find({sort:[{odo:e}]}).$;findMax=()=>this.#e.odo.findOne({sort:[{odo:"desc"}]}).$;static \u0275fac=function(i){return new(i||n)};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})();var Vt="leasingInfo",J=(()=>{class n{leasingInfoSubject=new Yt(1);leasingInfo$=this.leasingInfoSubject.asObservable();constructor(){let e=this.getLeasingInfo();e&&this.leasingInfoSubject.next(e)}save=e=>{localStorage.setItem(Vt,JSON.stringify(e)),this.leasingInfoSubject.next(e)};getLeasingInfo=()=>localStorage.getItem(Vt)?JSON.parse(localStorage.getItem(Vt)):null;static \u0275fac=function(i){return new(i||n)};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})();var Fn=(()=>{class n{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,i){this._renderer=e,this._elementRef=i}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(i){return new(i||n)(S(Se),S(le))};static \u0275dir=E({type:n})}return n})(),Nn=(()=>{class n extends Fn{static \u0275fac=(()=>{let e;return function(r){return(e||(e=Ke(n)))(r||n)}})();static \u0275dir=E({type:n,features:[z]})}return n})(),Mt=new Q(""),Di={provide:Mt,useExisting:he(()=>xt),multi:!0},xt=(()=>{class n extends Nn{writeValue(e){this.setProperty("checked",e)}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Ke(n)))(r||n)}})();static \u0275dir=E({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,r){i&1&&C("change",function(s){return r.onChange(s.target.checked)})("blur",function(){return r.onTouched()})},standalone:!1,features:[q([Di]),z]})}return n})(),bi={provide:Mt,useExisting:he(()=>se),multi:!0};function Ei(){let n=Et()?Et().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var Vi=new Q(""),se=(()=>{class n extends Fn{_compositionMode;_composing=!1;constructor(e,i,r){super(e,i),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!Ei())}writeValue(e){let i=e??"";this.setProperty("value",i)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(i){return new(i||n)(S(Se),S(le),S(Vi,8))};static \u0275dir=E({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&C("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},standalone:!1,features:[q([bi]),z]})}return n})();function wi(n){return n==null||Si(n)===0}function Si(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Te=new Q(""),Pn=new Q("");function Ai(n){return wi(n.value)?{required:!0}:null}function Vn(n){return null}function Tn(n){return n!=null}function kn(n){return dn(n)?Xt(n):n}function Rn(n){let t={};return n.forEach(e=>{t=e!=null?M(M({},t),e):t}),Object.keys(t).length===0?null:t}function Ln(n,t){return t.map(e=>e(n))}function Mi(n){return!n.validate}function jn(n){return n.map(t=>Mi(t)?t:e=>t.validate(e))}function xi(n){if(!n)return null;let t=n.filter(Tn);return t.length==0?null:function(e){return Rn(Ln(e,t))}}function It(n){return n!=null?xi(jn(n)):null}function Ii(n){if(!n)return null;let t=n.filter(Tn);return t.length==0?null:function(e){let i=Ln(e,t).map(kn);return Jt(i).pipe(T(Rn))}}function Ot(n){return n!=null?Ii(jn(n)):null}function wn(n,t){return n===null?[t]:Array.isArray(n)?[...n,t]:[n,t]}function Oi(n){return n._rawValidators}function Fi(n){return n._rawAsyncValidators}function wt(n){return n?Array.isArray(n)?n:[n]:[]}function Xe(n,t){return Array.isArray(n)?n.includes(t):n===t}function Sn(n,t){let e=wt(t);return wt(n).forEach(r=>{Xe(e,r)||e.push(r)}),e}function An(n,t){return wt(t).filter(e=>!Xe(n,e))}var Je=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=It(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Ot(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},ye=class extends Je{name;get formDirective(){return null}get path(){return null}},Pe=class extends Je{_parent=null;name=null;valueAccessor=null},Qe=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Ni={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Io=P(M({},Ni),{"[class.ng-submitted]":"isSubmitted"}),Ce=(()=>{class n extends Qe{constructor(e){super(e)}static \u0275fac=function(i){return new(i||n)(S(Pe,2))};static \u0275dir=E({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&Me("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[z]})}return n})(),it=(()=>{class n extends Qe{constructor(e){super(e)}static \u0275fac=function(i){return new(i||n)(S(ye,10))};static \u0275dir=E({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&Me("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},standalone:!1,features:[z]})}return n})();var xe="VALID",Ye="INVALID",ve="PENDING",Ie="DISABLED",oe=class{},et=class extends oe{value;source;constructor(t,e){super(),this.value=t,this.source=e}},Fe=class extends oe{pristine;source;constructor(t,e){super(),this.pristine=t,this.source=e}},Ne=class extends oe{touched;source;constructor(t,e){super(),this.touched=t,this.source=e}},_e=class extends oe{status;source;constructor(t,e){super(),this.status=t,this.source=e}},St=class extends oe{source;constructor(t){super(),this.source=t}},At=class extends oe{source;constructor(t){super(),this.source=t}};function $n(n){return(rt(n)?n.validators:n)||null}function Pi(n){return Array.isArray(n)?It(n):n||null}function Gn(n,t){return(rt(t)?t.asyncValidators:n)||null}function Ti(n){return Array.isArray(n)?Ot(n):n||null}function rt(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function ki(n,t,e){let i=n.controls;if(!(t?Object.keys(i):i).length)throw new He(1e3,"");if(!i[e])throw new He(1001,"")}function Ri(n,t,e){n._forEachChild((i,r)=>{if(e[r]===void 0)throw new He(1002,"")})}var tt=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,e){this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return ie(this.statusReactive)}set status(t){ie(()=>this.statusReactive.set(t))}_status=Y(()=>this.statusReactive());statusReactive=I(void 0);get valid(){return this.status===xe}get invalid(){return this.status===Ye}get pending(){return this.status==ve}get disabled(){return this.status===Ie}get enabled(){return this.status!==Ie}errors;get pristine(){return ie(this.pristineReactive)}set pristine(t){ie(()=>this.pristineReactive.set(t))}_pristine=Y(()=>this.pristineReactive());pristineReactive=I(!0);get dirty(){return!this.pristine}get touched(){return ie(this.touchedReactive)}set touched(t){ie(()=>this.touchedReactive.set(t))}_touched=Y(()=>this.touchedReactive());touchedReactive=I(!1);get untouched(){return!this.touched}_events=new Zt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(Sn(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(Sn(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(An(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(An(t,this._rawAsyncValidators))}hasValidator(t){return Xe(this._rawValidators,t)}hasAsyncValidator(t){return Xe(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(P(M({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new Ne(!0,i))}markAllAsDirty(t={}){this.markAsDirty({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsDirty(t))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:i})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,i),e&&t.emitEvent!==!1&&this._events.next(new Ne(!1,i))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(P(M({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new Fe(!1,i))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,i),e&&t.emitEvent!==!1&&this._events.next(new Fe(!0,i))}markAsPending(t={}){this.status=ve;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new _e(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(P(M({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Ie,this.errors=null,this._forEachChild(r=>{r.disable(P(M({},t),{onlySelf:!0}))}),this._updateValue();let i=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new et(this.value,i)),this._events.next(new _e(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(P(M({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=xe,this._forEachChild(i=>{i.enable(P(M({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(P(M({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===xe||this.status===ve)&&this._runAsyncValidator(i,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new et(this.value,e)),this._events.next(new _e(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(P(M({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ie:xe}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=ve,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1,shouldHaveEmitted:t!==!1};let i=kn(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){let i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,i){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||i)&&this._events.next(new _e(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,i)}_initObservables(){this.valueChanges=new Ae,this.statusChanges=new Ae}_calculateStatus(){return this._allControlsDisabled()?Ie:this.errors?Ye:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ve)?ve:this._anyControlsHaveStatus(Ye)?Ye:xe}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),r&&this._events.next(new Fe(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new Ne(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){rt(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=Pi(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=Ti(this._rawAsyncValidators)}},nt=class extends tt{constructor(t,e,i){super($n(e),Gn(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){Ri(this,!0,t),Object.keys(t).forEach(i=>{ki(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(i=>{let r=this.controls[i];r&&r.patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t?t[r]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>i._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,i]of Object.entries(this.controls))if(this.contains(e)&&t(i))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,i,r)=>((i.enabled||this.disabled)&&(e[r]=i.value),e))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,o)=>{i=e(i,r,o)}),i}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var Ft=new Q("",{providedIn:"root",factory:()=>Nt}),Nt="always";function Li(n,t){return[...t.path,n]}function Un(n,t,e=Nt){Bn(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(n.disabled),$i(n,t),Ui(n,t),Gi(n,t),ji(n,t)}function Mn(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function ji(n,t){if(t.valueAccessor.setDisabledState){let e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}function Bn(n,t){let e=Oi(n);t.validator!==null?n.setValidators(wn(e,t.validator)):typeof e=="function"&&n.setValidators([e]);let i=Fi(n);t.asyncValidator!==null?n.setAsyncValidators(wn(i,t.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();Mn(t._rawValidators,r),Mn(t._rawAsyncValidators,r)}function $i(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&Hn(n,t)})}function Gi(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&Hn(n,t),n.updateOn!=="submit"&&n.markAsTouched()})}function Hn(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Ui(n,t){let e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}function Bi(n,t){n==null,Bn(n,t)}function Hi(n,t){if(!n.hasOwnProperty("model"))return!1;let e=n.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function Wi(n){return Object.getPrototypeOf(n.constructor)===Nn}function qi(n,t){n._syncPendingControls(),t.forEach(e=>{let i=e.control;i.updateOn==="submit"&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function Ki(n,t){if(!t)return null;Array.isArray(t);let e,i,r;return t.forEach(o=>{o.constructor===se?e=o:Wi(o)?i=o:r=o}),r||i||e||null}var zi={provide:ye,useExisting:he(()=>ke)},Oe=Promise.resolve(),ke=(()=>{class n extends ye{callSetDisabledState;get submitted(){return ie(this.submittedReactive)}_submitted=Y(()=>this.submittedReactive());submittedReactive=I(!1);_directives=new Set;form;ngSubmit=new Ae;options;constructor(e,i,r){super(),this.callSetDisabledState=r,this.form=new nt({},It(e),Ot(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){Oe.then(()=>{let i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),Un(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){Oe.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){Oe.then(()=>{let i=this._findContainer(e.path),r=new nt({});Bi(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){Oe.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){Oe.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submittedReactive.set(!0),qi(this.form,this._directives),this.ngSubmit.emit(e),this.form._events.next(new St(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submittedReactive.set(!1),this.form._events.next(new At(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static \u0275fac=function(i){return new(i||n)(S(Te,10),S(Pn,10),S(Ft,8))};static \u0275dir=E({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){i&1&&C("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[q([zi]),z]})}return n})();function xn(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function In(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Zi=class extends tt{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,e,i){super($n(e),Gn(i,e)),this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),rt(e)&&(e.nonNullable||e.initialValueIsDefault)&&(In(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){xn(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){xn(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){In(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var Yi={provide:Pe,useExisting:he(()=>ce)},On=Promise.resolve(),ce=(()=>{class n extends Pe{_changeDetectorRef;callSetDisabledState;control=new Zi;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Ae;constructor(e,i,r,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=Ki(this,o)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),Hi(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Un(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){On.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let i=e.isDisabled.currentValue,r=i!==0&&bt(i);On.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?Li(e,this._parent):[e]}static \u0275fac=function(i){return new(i||n)(S(ye,9),S(Te,10),S(Pn,10),S(Mt,10),S(Cn,8),S(Ft,8))};static \u0275dir=E({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[q([Yi]),z,we]})}return n})();var ot=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=E({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var Xi=(()=>{class n{_validator=Vn;_onChange;_enabled;ngOnChanges(e){if(this.inputName in e){let i=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):Vn,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return e!=null}static \u0275fac=function(i){return new(i||n)};static \u0275dir=E({type:n,features:[we]})}return n})();var Ji={provide:Te,useExisting:he(()=>Re),multi:!0};var Re=(()=>{class n extends Xi{required;inputName="required";normalizeInput=bt;createValidator=e=>Ai;enabled(e){return e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Ke(n)))(r||n)}})();static \u0275dir=E({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,r){i&2&&hn("required",r._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[q([Ji]),z]})}return n})();var Qi=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=yt({type:n});static \u0275inj=vt({})}return n})();var De=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:Ft,useValue:e.callSetDisabledState??Nt}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=yt({type:n});static \u0275inj=vt({imports:[Qi]})}return n})();function Wn(n){let{anchorOffset:t=0,focusOffset:e=0}=n.ownerDocument.getSelection()||{},i=Math.min(t,e),r=Math.max(t,e);return[i,r]}function er(n,[t,e]){var i,r,o,s;let a=n.ownerDocument,l=a.createRange();l.setStart(n.firstChild||n,Math.min(t,(r=(i=n.textContent)===null||i===void 0?void 0:i.length)!==null&&r!==void 0?r:0)),l.setEnd(n.lastChild||n,Math.min(e,(s=(o=n.textContent)===null||o===void 0?void 0:o.length)!==null&&s!==void 0?s:0));let c=a.getSelection();c&&(c.removeAllRanges(),c.addRange(l))}var kt=class{constructor(t){this.element=t,this.maxLength=1/0}get value(){return this.element.innerText.replace(/\n\n$/,`
`)}set value(t){this.element.innerHTML=t.replace(/\n$/,`

`)}get selectionStart(){return Wn(this.element)[0]}get selectionEnd(){return Wn(this.element)[1]}setSelectionRange(t,e){er(this.element,[t??0,e??0])}select(){this.setSelectionRange(0,this.value.length)}};function tr(n){let t=new kt(n);return new Proxy(n,{get(e,i){if(i in t)return t[i];let r=e[i];return typeof r=="function"?r.bind(e):r},set(e,i,r,o){return Reflect.set(i in t?t:e,i,r,o)}})}var Zn=n=>n.isContentEditable?tr(n):n.querySelector("input,textarea")||n,Ge={mask:/^.*$/,preprocessors:[],postprocessors:[],plugins:[],overwriteMode:"shift"},Rt=class{constructor(){this.now=null,this.past=[],this.future=[]}undo(){let t=this.past.pop();t&&this.now&&(this.future.push(this.now),this.updateElement(t,"historyUndo"))}redo(){let t=this.future.pop();t&&this.now&&(this.past.push(this.now),this.updateElement(t,"historyRedo"))}updateHistory(t){if(!this.now){this.now=t;return}let e=this.now.value!==t.value,i=this.now.selection.some((r,o)=>r!==t.selection[o]);!e&&!i||(e&&(this.past.push(this.now),this.future=[]),this.now=t)}updateElement(t,e){this.now=t,this.updateElementState(t,{inputType:e,data:null})}};function nr(n,...t){return t.every(({value:e})=>e===n.value)}function Lt(n,...t){return t.every(({value:e,selection:i})=>e===n.value&&i[0]===n.selection[0]&&i[1]===n.selection[1])}function ir({value:n,selection:t},e,i){let[r,o]=t,s=typeof i=="function"?i({value:n,selection:t}):i;return{value:n,selection:s==="replace"?[r,Math.max(r+e.length,o)]:[r,o]}}function ut(n){return typeof n=="string"}function qn(n,t,e,i){let r="";for(let o=t.length;o<n.length;o++){let s=n[o]||"",a=i?.value[o]===s;if(!ut(s)||s===e&&!a)return r;r+=s}return r}function Yn(n,t){return Array.isArray(t)?n.length===t.length&&Array.from(n).every((e,i)=>{let r=t[i]||"";return ut(r)?e===r:e.match(r)}):t.test(n)}function rr(n,t,e){let i=null,r=null,o=Array.from(n.value).reduce((a,l,c)=>{let u=qn(t,a,l,e),d=a+u,m=t[d.length]||"";return i===null&&c>=n.selection[0]&&(i=d.length),r===null&&c>=n.selection[1]&&(r=d.length),ut(m)?d+m:l.match(m)?d+l:d},""),s=qn(t,o,"",e);return{value:Yn(o+s,t)?o+s:o,selection:[i??o.length,r??o.length]}}function or({value:n,selection:t},e){let[i,r]=t,o=i,s=r,a=Array.from(n).reduce((l,c,u)=>{let d=l+c;return i===u&&(o=l.length),r===u&&(s=l.length),d.match(e)?d:l},"");return{value:a,selection:[Math.min(o,a.length),Math.min(s,a.length)]}}function st(n,t,e=null){if(Yn(n.value,t))return n;let{value:i,selection:r}=Array.isArray(t)?rr(n,t,e):or(n,t);return{selection:r,value:Array.isArray(t)?i.slice(0,t.length):i}}function Kn(n,t){if(!Array.isArray(t))return n;let[e,i]=n.selection,r=[],o=Array.from(n.value).reduce((s,a,l)=>{let c=t[l]||"";return l===e&&r.push(s.length),l===i&&r.push(s.length),ut(c)&&c===a?s:s+a},"");return r.length<2&&r.push(...new Array(2-r.length).fill(o.length)),{value:o,selection:[r[0],r[1]]}}var $e=class{constructor(t,e){this.initialElementState=t,this.maskOptions=e,this.value="",this.selection=[0,0];let{value:i,selection:r}=st(this.initialElementState,this.getMaskExpression(this.initialElementState));this.value=i,this.selection=r}addCharacters([t,e],i){let{value:r,maskOptions:o}=this,s=this.getMaskExpression({value:r.slice(0,t)+i+r.slice(e),selection:[t+i.length,t+i.length]}),a={value:r,selection:[t,e]},l=Kn(a,s),[c,u]=ir(l,i,o.overwriteMode).selection,d=l.value.slice(0,c)+i,m=d.length,v=st({value:d+l.value.slice(u),selection:[m,m]},s,a);if(r.slice(0,t)===st({value:d,selection:[m,m]},s,a).value||Lt(this,v))throw new Error("Invalid mask value");this.value=v.value,this.selection=v.selection}deleteCharacters([t,e]){if(t===e||!e)return;let{value:i}=this,r=this.getMaskExpression({value:i.slice(0,t)+i.slice(e),selection:[t,t]}),o={value:i,selection:[t,e]},s=Kn(o,r),[a,l]=s.selection,c=s.value.slice(0,a)+s.value.slice(l),u=st({value:c,selection:[a,a]},r,o);this.value=u.value,this.selection=u.selection}getMaskExpression(t){let{mask:e}=this.maskOptions;return typeof e=="function"?e(t):e}};var at=class{constructor(t){this.element=t,this.listeners=[]}listen(t,e,i){let r=e;this.element.addEventListener(t,r,i),this.listeners.push(()=>this.element.removeEventListener(t,r,i))}destroy(){this.listeners.forEach(t=>t())}},B={CTRL:1,ALT:2,SHIFT:4,META:8},Le={Y:89,Z:90};function je(n,t,e){return n.ctrlKey===!!(t&B.CTRL)&&n.altKey===!!(t&B.ALT)&&n.shiftKey===!!(t&B.SHIFT)&&n.metaKey===!!(t&B.META)&&n.keyCode===e}function sr(n){return je(n,B.CTRL,Le.Y)||je(n,B.CTRL|B.SHIFT,Le.Z)||je(n,B.META|B.SHIFT,Le.Z)}function ar(n){return je(n,B.CTRL,Le.Z)||je(n,B.META,Le.Z)}function dt(n,t){var e;let i=n.value;if(typeof t=="string")n.value=t;else{let[r,o]=t.selection;n.value=t.value,n.matches(":focus")&&((e=n.setSelectionRange)===null||e===void 0||e.call(n,r,o))}n.value!==i&&n.dispatchEvent(new Event("input",{bubbles:!0}))}function lr({value:n,selection:t},e){let[i,r]=t;if(i!==r)return[i,r];let o=e?n.slice(i).indexOf(`
`)+1||n.length:n.slice(0,r).lastIndexOf(`
`)+1;return[e?i:o,e?o:r]}function cr({value:n,selection:t},e){let[i,r]=t;return i!==r?[i,r]:(e?[i,r+1]:[i-1,r]).map(s=>Math.min(Math.max(s,0),n.length))}var ur=/\s+$/g,dr=/^\s+/g,zn=/\s/;function hr({value:n,selection:t},e){let[i,r]=t;if(i!==r)return[i,r];if(e){let l=n.slice(i),[c]=l.match(dr)||[""],u=l.trimStart().search(zn);return[i,u!==-1?i+c.length+u:n.length]}let o=n.slice(0,r),[s]=o.match(ur)||[""],a=o.trimEnd().split("").reverse().findIndex(l=>zn.exec(l));return[a!==-1?r-s.length-a:0,r]}function lt(n=[]){return(t,...e)=>n.reduce((i,r)=>Object.assign(Object.assign({},i),r(i,...e)),t)}function be(n,t){let e=Object.assign(Object.assign({},Ge),t),i=lt(e.preprocessors),r=lt(e.postprocessors),o=typeof n=="string"?{value:n,selection:[0,0]}:n,{elementState:s}=i({elementState:o,data:""},"validation"),a=new $e(s,e),{value:l,selection:c}=r(a,o);return typeof n=="string"?l:{value:l,selection:c}}var Tt=" ";function fr(){let n="",t=0,e=null,i=!1;return r=>{let o=new at(r);return o.listen("beforeinput",s=>{var a,l;let{value:c,selectionStart:u,selectionEnd:d}=r,m=e?.inputType==="insertText"&&e?.data===Tt&&!c.slice(0,Number(d)).endsWith(Tt);s.inputType==="insertText"&&s.data===`.${Tt}`&&(e?.inputType==="deleteContentBackward"&&i?(r.value=n,(a=r.setSelectionRange)===null||a===void 0||a.call(r,t,t)):m&&((l=r.setSelectionRange)===null||l===void 0||l.call(r,u,u))),i=m,e=s,n=c,t=Number((m?t:d)===c.length?d:u)}),()=>o.destroy()}}var mr=[fr()],ct=class extends Rt{constructor(t,e){super(),this.element=t,this.maskitoOptions=e,this.isTextArea=this.element.nodeName==="TEXTAREA",this.eventListener=new at(this.element),this.options=Object.assign(Object.assign({},Ge),this.maskitoOptions),this.upcomingElementState=null,this.preprocessor=lt(this.options.preprocessors),this.postprocessor=lt(this.options.postprocessors),this.teardowns=this.options.plugins.concat(mr).map(i=>i(this.element,this.options)),this.updateHistory(this.elementState),this.eventListener.listen("keydown",i=>{if(sr(i))return i.preventDefault(),this.redo();if(ar(i))return i.preventDefault(),this.undo()}),this.eventListener.listen("beforeinput",i=>{var r,o,s;let a=i.inputType.includes("Forward");switch(this.updateHistory(this.elementState),i.inputType){case"deleteByCut":case"deleteContentBackward":case"deleteContentForward":return this.handleDelete({event:i,isForward:a,selection:cr(this.elementState,a)});case"deleteHardLineBackward":case"deleteHardLineForward":case"deleteSoftLineBackward":case"deleteSoftLineForward":return this.handleDelete({event:i,isForward:a,selection:lr(this.elementState,a),force:!0});case"deleteWordBackward":case"deleteWordForward":return this.handleDelete({event:i,isForward:a,selection:hr(this.elementState,a),force:!0});case"historyRedo":return i.preventDefault(),this.redo();case"historyUndo":return i.preventDefault(),this.undo();case"insertCompositionText":return;case"insertLineBreak":case"insertParagraph":return this.handleEnter(i);case"insertReplacementText":return;case"insertFromDrop":case"insertFromPaste":case"insertText":default:return this.handleInsert(i,(s=(r=i.data)!==null&&r!==void 0?r:(o=i.dataTransfer)===null||o===void 0?void 0:o.getData("text/plain"))!==null&&s!==void 0?s:"")}}),this.eventListener.listen("input",()=>{this.upcomingElementState&&(this.updateElementState(this.upcomingElementState),this.upcomingElementState=null)},{capture:!0}),this.eventListener.listen("input",({inputType:i})=>{i!=="insertCompositionText"&&(this.ensureValueFitsMask(),this.updateHistory(this.elementState))}),this.eventListener.listen("compositionend",()=>{this.ensureValueFitsMask(),this.updateHistory(this.elementState)})}destroy(){this.eventListener.destroy(),this.teardowns.forEach(t=>t?.())}updateElementState({value:t,selection:e},i){let r=this.elementState.value;this.updateValue(t),this.updateSelectionRange(e),i&&r!==t&&this.dispatchInputEvent(i)}get elementState(){let{value:t,selectionStart:e,selectionEnd:i}=this.element;return{value:t,selection:[e??0,i??0]}}get maxLength(){let{maxLength:t}=this.element;return t===-1?1/0:t}updateSelectionRange([t,e]){var i;let{element:r}=this;r.matches(":focus")&&(r.selectionStart!==t||r.selectionEnd!==e)&&((i=r.setSelectionRange)===null||i===void 0||i.call(r,t,e))}updateValue(t){this.element.value=t}ensureValueFitsMask(){this.updateElementState(be(this.elementState,this.options),{inputType:"insertText",data:null})}dispatchInputEvent(t={inputType:"insertText",data:null}){globalThis.InputEvent&&this.element.dispatchEvent(new InputEvent("input",Object.assign(Object.assign({},t),{bubbles:!0,cancelable:!1})))}handleDelete({event:t,selection:e,isForward:i,force:r=!1}){let o={value:this.elementState.value,selection:e},[s,a]=o.selection,{elementState:l}=this.preprocessor({elementState:o,data:""},i?"deleteForward":"deleteBackward"),c=new $e(l,this.options),[u,d]=l.selection;c.deleteCharacters([u,d]);let m=this.postprocessor(c,o),v={value:o.value.slice(0,s)+o.value.slice(a),selection:[s,s]};if(!(Lt(v,m)&&!r&&!this.element.isContentEditable)){if(nr(o,l,c,m))return t.preventDefault(),this.updateSelectionRange(i?[d,d]:[u,u]);this.upcomingElementState=m}}handleInsert(t,e){let{options:i,maxLength:r,element:o,elementState:s}=this,{elementState:a,data:l=e}=this.preprocessor({data:e,elementState:s},"insert"),c=new $e(a,i);try{c.addCharacters(a.selection,l)}catch{return t.preventDefault()}let[u,d]=s.selection,m={value:s.value.slice(0,u)+e+s.value.slice(d),selection:[u+e.length,u+e.length]},v=this.postprocessor(c,s);if(v.value.length>r)return t.preventDefault();(!Lt(m,v)||o.isContentEditable)&&(this.upcomingElementState=v,i.overwriteMode==="replace"&&m.value.length>r&&this.dispatchInputEvent({inputType:"insertText",data:e}))}handleEnter(t){(this.isTextArea||this.element.isContentEditable)&&this.handleInsert(t,`
`)}};var ht=(()=>{let t=class t{constructor(){this.elementRef=g(le).nativeElement,this.ngZone=g(un),this.maskedElement=null,this.options=null,this.elementPredicate=Zn;let i=g(se,{self:!0,optional:!0});if(i){let r=i.writeValue.bind(i);i.writeValue=o=>{r(this.options?be(String(o??""),this.options):o)}}}async ngOnChanges(){let{elementPredicate:i,options:r,maskedElement:o,elementRef:s,ngZone:a}=this;if(o?.destroy(),!r)return;let l=await i(s);this.elementPredicate!==i||this.options!==r||a.runOutsideAngular(()=>{this.maskedElement=new ct(l,r)})}ngOnDestroy(){this.maskedElement?.destroy()}};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=E({type:t,selectors:[["","maskito",""]],inputs:{options:[0,"maskito","options"],elementPredicate:[0,"maskitoElement","elementPredicate"]},features:[we]});let n=t;return n})();function ft(n,t,e){let i=Math.min(Number(e),Math.max(Number(t),Number(n)));return n instanceof Date?new Date(i):i}var gr=[".",",","\u0431","\u044E"];var $t="\xA0",vr="\u200B",ti="\u2013",ni="\u2014",mt="-",jt="\u2212",ii="\u30FC";var Uo=new RegExp(`[${$t}APM]+$`,"g"),Bo=new RegExp(`${$t}[AP]M$`,"g"),_r=[":","."];function Ee(n){return n}function yr(){}var ri=/[\\^$.*+?()[\]{}|]/g,Cr=new RegExp(ri.source);function F(n){return n&&Cr.test(n)?n.replaceAll(ri,String.raw`\$&`):n}function H(n,{prefix:t,postfix:e}){var i,r;let o=new RegExp(`^${F(t)}`),s=new RegExp(`${F(e)}$`),[a=""]=(i=n.match(o))!==null&&i!==void 0?i:[],[l=""]=(r=n.match(s))!==null&&r!==void 0?r:[];return{extractedPrefix:a,extractedPostfix:l,cleanValue:a||l?n.slice(a.length,l.length?-l.length:1/0):n}}function Dr(n,t){let e="";for(let i=0;i<n.length;i++){if(n[i]!==t[i])return e;e+=n[i]}return e}function Xn(n){return n.replaceAll(/[０-９]/g,t=>String.fromCharCode(t.charCodeAt(0)-65248))}function br(){return({elementState:n,data:t})=>{let{value:e,selection:i}=n;return{elementState:{selection:i,value:Xn(e)},data:Xn(t)}}}var Ho=new RegExp(`[${_r.map(F).join("")}]$`);function Er(n){let t=new RegExp(`${F(n)}$`);return n?({value:e,selection:i},r)=>{if(!e&&!r.value.endsWith(n))return{value:e,selection:i};if(!e.endsWith(n)&&!r.value.endsWith(n))return{selection:i,value:e+n};let o=r.value.replace(t,""),s=r.selection[1]>o.length,a=Dr(o,e);return{selection:i,value:Array.from(n).reverse().reduce((l,c,u)=>{let d=l.length-1-u,m=a[d]===c&&s;return l[d]!==c||m?l.slice(0,d+1)+c+l.slice(d+1):l},e)}}:Ee}function Vr(n){return n?({value:t,selection:e},i)=>{if(t.startsWith(n)||!t&&!i.value.startsWith(n))return{value:t,selection:e};let[r,o]=e,s=Array.from(n).reduce((l,c,u)=>l[u]===c?l:l.slice(0,u)+c+l.slice(u),t),a=s.length-t.length;return{selection:[r+a,o+a],value:s}}:Ee}function Gt(n,t,e){return(i,r)=>{let o=()=>t(i,r);return i.addEventListener(n,o,e),()=>i.removeEventListener(n,o,e)}}var Wo=Intl.DateTimeFormat("en-US",{month:"2-digit",day:"2-digit",year:"numeric"});function wr({prefix:n,postfix:t}){return({elementState:e,data:i})=>{let{cleanValue:r}=H(i,{prefix:n,postfix:t});return{elementState:e,data:r}}}function oi({decimalSeparator:n,isNegativeAllowed:t,maximumFractionDigits:e,thousandSeparator:i,prefix:r,postfix:o,decimalPseudoSeparators:s=[],pseudoMinuses:a=[],minusSign:l}){let c=Jn(r),u=String.raw`\d`,d=t?`[${l}${a.map(w=>`\\${w}`).join("")}]?`:"",m=i?`[${u}${F(i).replaceAll(/\s/g,String.raw`\s`)}]*`:`[${u}]*`,v=Number.isFinite(e)?e:"",p=e>0?`([${F(n)}${s.map(F).join("")}]${u}{0,${v}})?`:"",x=Jn(o);return new RegExp(`^${c}${d}${m}${p}${x}$`)}function Jn(n){return n?`${n.split("").map(t=>`${F(t)}?`).join("")}`:""}function Ut(n,t="."){let e=!!new RegExp(`^\\D*[${jt}\\${mt}${ti}${ni}${ii}]`).exec(n),i=F(t),r=n.replaceAll(new RegExp(`${i}(?!\\d)`,"g"),"").replaceAll(new RegExp(`[^\\d${i}]`,"g"),"").replace(t,t&&".");return r?+`${e?mt:""}${r}`:NaN}function Sr(n){var t;let e=String(n),[i="",r]=e.split("e-"),o=e;if(r){let[,s]=i.split("."),a=Number(r)+((t=s?.length)!==null&&t!==void 0?t:0);o=n.toFixed(a)}return o}function si(n,{decimalSeparator:t,minusSign:e}){let[i="",r=""]=t?n.split(t):[n],o=F(e),[,s="",a=""]=new RegExp(`^(?:[^\\d${o}])?(${o})?(.*)`).exec(i)||[];return{minus:s,integerPart:a,decimalPart:r}}function Ar({decimalSeparator:n,thousandSeparator:t,decimalPseudoSeparators:e=gr}){return e.filter(i=>i!==t&&i!==n)}function Mr({decimalSeparator:n,minimumFractionDigits:t,prefix:e,postfix:i}){return t?({value:r,selection:o})=>{let{cleanValue:s,extractedPrefix:a,extractedPostfix:l}=H(r,{prefix:e,postfix:i});if(Number.isNaN(Ut(s,n)))return{value:r,selection:o};let[c,u=""]=s.split(n);return{value:a+c+n+u.padEnd(t,"0")+l,selection:o}}:Ee}function xr({prefix:n,postfix:t,decimalSeparator:e,minusSign:i}){return({value:r,selection:o})=>{let[s]=o,{cleanValue:a,extractedPrefix:l,extractedPostfix:c}=H(r,{prefix:n,postfix:t}),{minus:u,integerPart:d,decimalPart:m}=si(a,{decimalSeparator:e,minusSign:i}),v=!d&&!m&&!!e&&a.includes(e);return!d&&!Number(m)&&s===(u+l).length||v?{selection:o,value:l+u+c}:{value:r,selection:o}}}function Ir({decimalSeparator:n,decimalPseudoSeparators:t,pseudoMinuses:e,prefix:i,postfix:r,minusSign:o}){let s=!0,a=oi({decimalSeparator:n,decimalPseudoSeparators:t,pseudoMinuses:e,prefix:"",postfix:"",thousandSeparator:"",maximumFractionDigits:1/0,isNegativeAllowed:!0,minusSign:o});return({elementState:l,data:c})=>{if(!s)return{elementState:l,data:c};s=!1;let{value:u,selection:d}=l,[m,v]=d,{extractedPrefix:p,cleanValue:x,extractedPostfix:w}=H(u,{prefix:i,postfix:r}),V=be({selection:[Math.max(m-p.length,0),ft(v-p.length,0,x.length)],value:x},{mask:a}),[j,W]=V.selection;return{elementState:{selection:[j+p.length,W+p.length],value:p+V.value+w},data:c}}}function Or({decimalSeparator:n,thousandSeparator:t,prefix:e,postfix:i}){let r=s=>{let a=F(t);return s.replace(new RegExp(`^(\\D+)?[0${a}]+(?=0)`),"$1").replace(new RegExp(`^(\\D+)?[0${a}]+(?=[1-9])`),"$1")},o=(s,a)=>{let l=s.slice(0,a),c=s.slice(a).startsWith("0");return l.length-r(l).length+(c?1:0)};return({value:s,selection:a})=>{let[l,c]=a,{cleanValue:u,extractedPrefix:d,extractedPostfix:m}=H(s,{prefix:e,postfix:i}),v=!!n&&u.includes(n),[p="",x=""]=n?u.split(n):[u],w=r(p);if(p===w)return{value:s,selection:a};let V=l-o(s,l),j=c-o(s,c);return{value:d+w+(v?n:"")+x+m,selection:[Math.max(V,0),Math.max(j,0)]}}}function Fr({min:n,max:t,decimalSeparator:e,minusSign:i}){return({value:r,selection:o})=>{let s=Ut(r,e),a=s>0?Math.min(s,t):Math.max(s,n);if(s&&a!==s){let l=`${a}`.replace(".",e).replace(mt,i);return{value:l,selection:[l.length,l.length]}}return{value:r,selection:o}}}function Nr({decimalSeparator:n,thousandSeparator:t,minimumFractionDigits:e}){return({elementState:i,data:r},o)=>{let{value:s,selection:a}=i,[l,c]=a,u=s.slice(l,c),d=e?[n,t]:[t],m=!!e&&l>s.indexOf(n)&&!!u.match(/^0+$/gi);return o!=="deleteBackward"&&o!=="deleteForward"||!d.includes(u)&&!m?{elementState:i,data:r}:{elementState:{value:s,selection:o==="deleteForward"?[c,c]:[l,l]},data:r}}}function Pr({decimalSeparator:n,maximumFractionDigits:t,prefix:e,postfix:i}){let r=new RegExp(`^\\D*${F(n)}`);return({elementState:o,data:s})=>{let{value:a,selection:l}=o,{cleanValue:c,extractedPrefix:u}=H(a,{prefix:e,postfix:i}),[d,m]=l,v=ft(d-u.length,0,c.length),p=ft(m-u.length,0,c.length);if(t<=0||c.slice(0,v).includes(n)||c.slice(p).includes(n)||!s.match(r))return{elementState:o,data:s};let x=/\d+/.exec(c.slice(0,v));return{elementState:o,data:x?s:`0${s}`}}}function Qn({validCharacter:n,pseudoCharacters:t,prefix:e,postfix:i}){let r=new RegExp(`[${t.join("")}]`,"gi");return({elementState:o,data:s})=>{let{value:a,selection:l}=o,{cleanValue:c,extractedPostfix:u,extractedPrefix:d}=H(a,{prefix:e,postfix:i});return{elementState:{selection:l,value:d+c.replace(r,n)+u},data:s.replace(r,n)}}}function Tr({decimalSeparator:n,prefix:t,postfix:e}){return n?({elementState:i,data:r})=>{let{value:o,selection:s}=i,[a,l]=s,{cleanValue:c}=H(o,{prefix:t,postfix:e});return{elementState:i,data:!c.includes(n)||o.slice(a,l+1).includes(n)?r:r.replaceAll(new RegExp(F(n),"gi"),"")}}:Ee}function kr({thousandSeparator:n,decimalSeparator:t,prefix:e,postfix:i,minusSign:r}){if(!n)return Ee;let o=(...s)=>s.every(a=>/\s/.test(a));return({value:s,selection:a})=>{let[l,c]=a,[u,d]=a,{cleanValue:m,extractedPostfix:v,extractedPrefix:p}=H(s,{prefix:e,postfix:i}),{minus:x,integerPart:w,decimalPart:V}=si(m,{decimalSeparator:t,minusSign:r}),j=t&&m.includes(t),W=m.length-(x+w+(j?t+V:"")).length;W>0&&l&&l<=W&&(u-=W),W>0&&c&&c<=W&&(d-=W);let Ci=Array.from(w).reduceRight((ue,Ve,ae)=>{let gt=!(!ae&&Ve===n)&&!!ue.length&&(ue.length+1)%4===0,zt=Ve===n||o(Ve,n);return gt&&zt?n+ue:!gt&&zt?(ae&&ae<=l&&u--,ae&&ae<=c&&d--,ue):gt?(ae<l&&u++,ae<c&&d++,Ve+n+ue):Ve+ue},"");return{value:p+x+Ci+(j?t:"")+V+v,selection:[u,d]}}}function Rr({maximumFractionDigits:n,decimalSeparator:t,prefix:e,postfix:i}){if(n>0||!t)return Ee;let r=new RegExp(`${F(t)}.*$`,"g");return({elementState:o,data:s})=>{let{value:a,selection:l}=o,{cleanValue:c,extractedPrefix:u,extractedPostfix:d}=H(a,{prefix:e,postfix:i}),[m,v]=l,p=u+c.replace(r,"")+d;return{elementState:{selection:[Math.min(m,p.length),Math.min(v,p.length)],value:p},data:s.replace(r,"")}}}var ei=[0,0];function Lr({decimalSeparator:n,thousandSeparator:t,prefix:e,postfix:i}){let r=Or({decimalSeparator:n,thousandSeparator:t,prefix:e,postfix:i});return Gt("blur",o=>{let s=r({value:o.value,selection:ei},{value:"",selection:ei}).value;dt(o,s)},{capture:!0})}function jr({min:n,max:t,decimalSeparator:e}){return Gt("blur",(i,r)=>{let o=Ut(i.value,e),s=ft(o,n,t);!Number.isNaN(o)&&o!==s&&dt(i,be(Sr(s),r))},{capture:!0})}function $r({decimalSeparator:n,prefix:t,postfix:e}){return n?Gt("blur",i=>{let{cleanValue:r,extractedPostfix:o,extractedPrefix:s}=H(i.value,{prefix:t,postfix:e}),a=s+r.replace(new RegExp(`^(\\D+)?${F(n)}`),`$10${n}`)+o;dt(i,a)},{capture:!0}):yr}function ai({max:n=Number.MAX_SAFE_INTEGER,min:t=Number.MIN_SAFE_INTEGER,precision:e=0,thousandSeparator:i=$t,decimalSeparator:r=".",decimalPseudoSeparators:o,decimalZeroPadding:s=!1,prefix:a="",postfix:l="",minusSign:c=jt,maximumFractionDigits:u=e,minimumFractionDigits:d=s?u:0}={}){let m=[mt,ti,ni,ii,jt].filter(w=>w!==i&&w!==r&&w!==c),v=Ar({decimalSeparator:r,thousandSeparator:i,decimalPseudoSeparators:o}),p=a.endsWith(r)&&u>0?`${a}${vr}`:a,x=Ir({decimalSeparator:r,decimalPseudoSeparators:v,pseudoMinuses:m,prefix:p,postfix:l,minusSign:c});return r=u<=0&&r===i?"":r,Object.assign(Object.assign({},Ge),{mask:oi({decimalSeparator:r,maximumFractionDigits:u,thousandSeparator:i,prefix:p,postfix:l,isNegativeAllowed:t<0,minusSign:c}),preprocessors:[br(),x,wr({prefix:p,postfix:l}),Qn({validCharacter:c,pseudoCharacters:m,prefix:p,postfix:l}),Qn({validCharacter:r,pseudoCharacters:v,prefix:p,postfix:l}),Pr({decimalSeparator:r,maximumFractionDigits:u,prefix:p,postfix:l}),Nr({decimalSeparator:r,minimumFractionDigits:d,thousandSeparator:i}),Rr({maximumFractionDigits:u,decimalSeparator:r,prefix:p,postfix:l}),Tr({decimalSeparator:r,prefix:p,postfix:l})],postprocessors:[Fr({decimalSeparator:r,min:t,max:n,minusSign:c}),Vr(p),Er(l),kr({decimalSeparator:r,thousandSeparator:i,prefix:p,postfix:l,minusSign:c}),Mr({decimalSeparator:r,prefix:p,postfix:l,minimumFractionDigits:Math.min(d,u)}),xr({prefix:p,postfix:l,decimalSeparator:r,minusSign:c})],plugins:[Lr({decimalSeparator:r,thousandSeparator:i,prefix:p,postfix:l}),$r({decimalSeparator:r,prefix:p,postfix:l}),jr({min:t,max:n,decimalSeparator:r})],overwriteMode:d>0?({value:w,selection:[V]})=>V<=w.indexOf(r)?"shift":"replace":"shift"})}var pt=(()=>{class n{maskitoDirective=g(ht);ngOnInit(){this.maskitoDirective.options=ai({decimalSeparator:",",thousandSeparator:".",maximumFractionDigits:2})}static \u0275fac=function(i){return new(i||n)};static \u0275dir=E({type:n,selectors:[["input","tuKmInput",""]],features:[cn([ht])]})}return n})();var Gr=["form"];function Ur(n,t){if(n&1){let e=$();h(0,"button",14),C("click",function(){D(e);let r=G();return b(r.resetOdo())}),A(1,"fast-svg",15),f()}}function Br(n,t){if(n&1){let e=$();h(0,"button",16),C("click",function(){let r=D(e).$implicit,o=G();return b(o.increaseODO(r))}),_(1),f()}if(n&2){let e=t.$implicit;y(),gn(" +",e," ")}}var li=(()=>{class n{#e=g(X);increaseValues=[50,100,250,500];form=pe.required("form");latestOdoEntry=U(this.#e.findMax());odometer=yn(()=>this.latestOdoEntry()?.odo??0);showReset=Y(()=>this.odometer()!==this.latestOdoEntry()?.odo);submitted=re();canceled=re();increaseODO(e){this.odometer.update(i=>(i??0)+e)}cancel(){this.canceled.emit()}async submit(){if(this.form().invalid){console.warn("Invalid form");return}await this.#e.save(this.odometer()),this.submitted.emit()}resetOdo(){this.odometer.set(this.latestOdoEntry()?.odo??0)}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=N({type:n,selectors:[["tu-add-odo-form"]],viewQuery:function(i,r){i&1&&fe(r.form,Gr,5),i&2&&me()},hostAttrs:[1,"block","m-4"],outputs:{submitted:"submitted",canceled:"canceled"},decls:19,vars:2,consts:[["form","ngForm"],[1,"flex","items-center","justify-center","flex-col","gap-2",3,"ngSubmit"],[1,"flex","flex-row","justify-between","items-center","w-full"],[1,"text-2xl"],["type","button",1,"btn","btn-ghost","btn-sm","btn-circle"],[1,"input","input-lg","input-bordered","w-full","flex","items-center","gap-2"],["name","odometer","required","","tuKmInput","","inputmode","numeric",1,"grow","text-right",3,"ngModelChange","ngModel"],[1,"label"],[1,"label-text"],[1,"flex","row","gap-2","w-full"],["type","button",1,"btn","btn-neutral","btn-sm","md:btn-md","flex-1","whitespace-nowrap"],[1,"mt-4","flex","flex-row","items-center","justify-end","w-full","gap-2"],["type","button",1,"btn","btn-ghost",3,"click"],["type","submit",1,"btn","btn-primary"],["type","button",1,"btn","btn-ghost","btn-sm","btn-circle",3,"click"],["name","reset"],["type","button",1,"btn","btn-neutral","btn-sm","md:btn-md","flex-1","whitespace-nowrap",3,"click"]],template:function(i,r){if(i&1){let o=$();h(0,"form",1,0),C("ngSubmit",function(){return D(o),b(r.submit())}),h(2,"div",2)(3,"h3",3),_(4,"ODO"),f(),k(5,Ur,2,0,"button",4),f(),h(6,"label",5)(7,"input",6),ne("ngModelChange",function(a){return D(o),te(r.odometer,a)||(r.odometer=a),b(a)}),f(),h(8,"div",7)(9,"span",8),_(10,"km"),f()()(),h(11,"div",9),mn(12,Br,2,1,"button",10,fn),f(),h(14,"div",11)(15,"button",12),C("click",function(){return D(o),b(r.cancel())}),_(16," Cancel "),f(),h(17,"button",13),_(18,"Save"),f()()()}i&2&&(y(5),R(r.showReset()?5:-1),y(2),ee("ngModel",r.odometer),y(5),pn(r.increaseValues))},dependencies:[De,ot,se,Ce,it,Re,ce,ke,pt,Ze],encapsulation:2,changeDetection:0})}return n})();var Hr=()=>n=>{try{return new Date(n.value),null}catch{return{invalidDate:{value:n.value}}}},ci=(()=>{class n{validate=e=>Hr()(e);static \u0275fac=function(i){return new(i||n)};static \u0275dir=E({type:n,selectors:[["","tuDateValidator",""]],features:[q([{provide:Te,useExisting:n,multi:!0}])]})}return n})();function ui(n=new Date){let t;return typeof n=="string"?t=new Date(n):t=n,t.toISOString().split("T")[0]}var Wr=["form"];function qr(n,t){n&1&&(h(0,"div",5)(1,"span",15),_(2,"Required"),f()())}var di=(()=>{class n{leasingInfoService=g(J);form=pe.required("form");leasingInfo=U(this.leasingInfoService.leasingInfo$);yearlyKmLimit=I(this.leasingInfo()?.yearlyKmLimit);initialOdo=I(this.leasingInfo()?.initialOdo);startDate=I(ui(this.leasingInfo()?.startDate));submitted=re();canceled=re();submit(){if(this.form().invalid){console.log("Invalid form"),console.log(this.form().errors);return}let e={yearlyKmLimit:Number(this.yearlyKmLimit()),initialOdo:Number(this.initialOdo()),startDate:new Date(this.startDate()).toISOString()};this.leasingInfoService.save(e),this.submitted.emit()}cancel(){this.canceled.emit()}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=N({type:n,selectors:[["tu-leasing-contract"]],viewQuery:function(i,r){i&1&&fe(r.form,Wr,5),i&2&&me()},outputs:{submitted:"submitted",canceled:"canceled"},decls:33,vars:4,consts:[["form","ngForm"],["startDateControl","ngModel"],[3,"ngSubmit"],[1,"flex","flex-col","gap-2"],[1,"text-2xl","self-start","mb-4"],[1,"label"],[1,"label-text"],[1,"input","input-bordered","w-full","flex","items-center","gap-2"],["required","","tuKmInput","","name","yearly","inputmode","numeric",1,"grow","text-right",3,"ngModelChange","ngModel"],["required","","tuKmInput","","name","startingKm","inputmode","numeric",1,"grow","text-right",3,"ngModelChange","ngModel"],[1,"form-control","w-full"],["required","","type","date","tuDateValidator","","name","startDate",1,"input","input-bordered","w-full","text-right",3,"ngModelChange","ngModel"],[1,"flex","items-center","justify-end","mt-8","gap-2"],["type","button",1,"btn","btn-ghost",3,"click"],["type","submit",1,"btn","btn-primary"],[1,"label-text","text-red-500"]],template:function(i,r){if(i&1){let o=$();h(0,"form",2,0),C("ngSubmit",function(){return D(o),b(r.submit())}),h(2,"div",3)(3,"h3",4),_(4,"Leasing Contract"),f(),h(5,"div")(6,"div",5)(7,"span",6),_(8,"KMs per year"),f()(),h(9,"label",7)(10,"input",8),ne("ngModelChange",function(a){return D(o),te(r.yearlyKmLimit,a)||(r.yearlyKmLimit=a),b(a)}),f(),h(11,"span",6),_(12,"km"),f()()(),h(13,"div")(14,"div",5)(15,"span",6),_(16,"Odometer at start"),f()(),h(17,"label",7)(18,"input",9),ne("ngModelChange",function(a){return D(o),te(r.initialOdo,a)||(r.initialOdo=a),b(a)}),f(),h(19,"span",6),_(20,"km"),f()()(),h(21,"label",10)(22,"div",5)(23,"span",6),_(24,"Start of contract"),f()(),h(25,"input",11,1),ne("ngModelChange",function(a){return D(o),te(r.startDate,a)||(r.startDate=a),b(a)}),f(),k(27,qr,3,0,"div",5),f()(),h(28,"div",12)(29,"button",13),C("click",function(){return D(o),b(r.cancel())}),_(30," Cancel "),f(),h(31,"button",14),_(32,"Save"),f()()()}if(i&2){let o=ze(26);y(10),ee("ngModel",r.yearlyKmLimit),y(8),ee("ngModel",r.initialOdo),y(7),ee("ngModel",r.startDate),y(2),R(o.hasError("required")?27:-1)}},dependencies:[De,ot,se,Ce,it,Re,ce,ke,ci,pt],styles:["input[type=date][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{margin-left:.25em}"],changeDetection:0})}return n})();var Bt=(()=>{class n{#e=g(J);#t=g(X);analyticsData$=de([this.#t.findMax().pipe(en(e=>!!e?.odo)),this.#e.leasingInfo$]).pipe(Be(([e,i],[r,o])=>e?.odo===r?.odo&&JSON.stringify(i)===JSON.stringify(o)),T(([e,i])=>this.generateAnalyticsData(e.odo,i)),nn({bufferSize:1,refCount:!0}));generateAnalyticsData(e,i){let r=i.yearlyKmLimit/365,o=Math.floor((Date.now()-new Date(i.startDate).getTime())/(1e3*3600*24)),l=(e-i.initialOdo)/o>r,c=r*o,u=Math.ceil(Math.abs(e-(i.initialOdo+c))),d=Math.ceil(u/r),m=i.initialOdo+Math.ceil(r*o);return{isDistanceOverExpected:l,differenceFromExpected:u,idleDaysToReachExpectedKm:d,expectedOdo:m}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})();var Ht={chart:{height:350,type:"line",toolbar:{show:!1},selection:{enabled:!1},zoom:{enabled:!1}},colors:["oklch(var(--a))","oklch(var(--p))"],xaxis:{type:"datetime",labels:{show:!1},axisBorder:{show:!1},axisTicks:{show:!1},crosshairs:{show:!1}},yaxis:{show:!1},dataLabels:{enabled:!1},stroke:{curve:"smooth"},tooltip:{enabled:!1},grid:{xaxis:{lines:{show:!1}},yaxis:{lines:{show:!1}},padding:{top:0,bottom:0}},legend:{show:!0,labels:{colors:"oklch(var(--bc) / 1)"},position:"top",itemMargin:{vertical:15},markers:{offsetX:-2.5,strokeWidth:0}}};function Kr(n,t){if(n&1&&A(0,"apx-chart",0),n&2){let e=t;Z("series",e.series)("chart",e.chart)("dataLabels",e.dataLabels)("stroke",e.stroke)("xaxis",e.xaxis)("tooltip",e.tooltip)("grid",e.grid)("legend",e.legend)("yaxis",e.yaxis)("colors",e.colors)}}var hi=(()=>{class n{analyticsData=L.required();#e=g(X);#t=g(J);chartState=Y(()=>{let e=this.series(),i=this.analyticsData();return e?.series?M(P(M({},Ht),{series:e.series,xaxis:P(M({},Ht.xaxis),{categories:e.categories})}),i.isDistanceOverExpected?{colors:["oklch(var(--er))","oklch(var(--p))"]}:{}):null});series=U(de([this.#t.leasingInfo$,this.#e.findMax(),ge(this.analyticsData)]).pipe(T(([e,i,r])=>({series:[{data:[e.initialOdo,i.odo],name:"Real"},{data:[e.initialOdo,r.expectedOdo],name:"Average"}],categories:[new Date(e.startDate).toISOString(),i.dateTime]}))));static \u0275fac=function(i){return new(i||n)};static \u0275cmp=N({type:n,selectors:[["tu-leasing-chart"]],hostAttrs:[1,"block","shadow-xl","bg-base-200","rounded-2xl"],inputs:{analyticsData:[1,"analyticsData"]},decls:1,vars:1,consts:[[3,"series","chart","dataLabels","stroke","xaxis","tooltip","grid","legend","yaxis","colors"]],template:function(i,r){if(i&1&&k(0,Kr,1,10,"apx-chart",0),i&2){let o;R((o=r.chartState())?0:-1,o)}},dependencies:[En],encapsulation:2,changeDetection:0})}return n})();var fi=(()=>{class n{elementRef=g(le);renderer=g(Se);destroyRef=g(qe);countUp=L.required();duration=L(1e3);suffix=L("");isNegative=L(!1);currentCount$=de([ge(this.countUp),ge(this.duration),ge(this.isNegative)]).pipe(rn(([e,i,r])=>{let o=Ue.now();return r&&(e=-e),Qt(0,Ue).pipe(T(()=>Ue.now()-o),T(s=>s/i),on(s=>s<=1),T(s=>s*(2-s)),T(s=>Math.round(s*e)),tn(e),T(s=>Intl.NumberFormat("de-DE").format(s)),Be())}));ngOnInit(){this.displayCurrentCount()}displayCurrentCount(){this.currentCount$.pipe(bn(this.destroyRef),T(e=>this.suffix()?e+" "+this.suffix():e)).subscribe(e=>{this.renderer.setProperty(this.elementRef.nativeElement,"innerHTML",e)})}static \u0275fac=function(i){return new(i||n)};static \u0275dir=E({type:n,selectors:[["","countUp",""]],inputs:{countUp:[1,"countUp"],duration:[1,"duration"],suffix:[1,"suffix"],isNegative:[1,"isNegative"]}})}return n})();function zr(n,t){n&1&&(h(0,"div",7),_(1,"Behind"),f(),h(2,"div",4),_(3,"You should rest for a few days!"),f())}function Zr(n,t){n&1&&(h(0,"div",8),_(1,"Ahead"),f(),h(2,"div",4),_(3,"You're doing great so far!"),f())}var mi=(()=>{class n{totalKm=L.required();difference=L.required();differenceInDays=L.required();isOverExpected=L.required();static \u0275fac=function(i){return new(i||n)};static \u0275cmp=N({type:n,selectors:[["tu-summary"]],hostAttrs:[1,"w-full","block"],inputs:{totalKm:[1,"totalKm"],difference:[1,"difference"],differenceInDays:[1,"differenceInDays"],isOverExpected:[1,"isOverExpected"]},decls:17,vars:11,consts:[[1,"stats","stats-vertical","md:stats-horizontal","shadow-xl","bg-base-200","w-full"],[1,"stat","max-md:place-items-center"],[1,"stat-title"],["suffix","km",1,"stat-value","text-primary",3,"countUp","duration"],[1,"stat-desc"],["suffix","km",1,"stat-value",3,"countUp","duration","isNegative"],["suffix","Days",1,"stat-value",3,"countUp"],[1,"stat-title","text-error"],[1,"stat-title","text-secondary"]],template:function(i,r){i&1&&(h(0,"div",0)(1,"div",1)(2,"div",2),_(3,"Total"),f(),A(4,"div",3),h(5,"div",4),_(6,"Total kilometers driven"),f()(),h(7,"div",1)(8,"div",2),_(9,"Difference"),f(),A(10,"div",5),h(11,"div",4),_(12,"From expected leasing mileage"),f()(),h(13,"div",1),A(14,"div",6),k(15,zr,4,0)(16,Zr,4,0),f()()),i&2&&(y(4),Z("countUp",r.totalKm())("duration",1500),y(6),Me("text-accent",!r.isOverExpected())("text-error",r.isOverExpected()),Z("countUp",r.difference())("duration",2e3)("isNegative",r.isOverExpected()),y(4),Z("countUp",r.differenceInDays()),y(),R(r.isOverExpected()?15:16))},dependencies:[fi],encapsulation:2,changeDetection:0})}return n})();var pi=(()=>{class n{addEntryClicked=re();static \u0275fac=function(i){return new(i||n)};static \u0275cmp=N({type:n,selectors:[["tu-empty-odo-state"]],outputs:{addEntryClicked:"addEntryClicked"},decls:9,vars:0,consts:[[1,"hero","bg-base-200","rounded-box","py-8"],[1,"hero-content","text-center"],[1,"max-w-md"],[1,"text-3xl","font-bold"],[1,"py-6"],[1,"btn","btn-primary",3,"click"]],template:function(i,r){i&1&&(h(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),_(4,"No ODO Entries Yet"),f(),h(5,"p",4),_(6," It looks like you haven't added any odometer entries. Click the button below to add your first entry! "),f(),h(7,"button",5),C("click",function(){return r.addEntryClicked.emit()}),_(8," Add ODO Entry "),f()()()())},encapsulation:2,changeDetection:0})}return n})();function gi(n,t,e){!t&&an(n);let i=t??g(_t);return e?sn(i,e):i}var Yr=new Q("NGXTENSION_LOCAL_STORAGE",{providedIn:"root",factory:()=>localStorage});function Xr(n){return"defaultValue"in n}function qt(n){return typeof n=="function"}function Wt(n,t){try{return n()}catch{return t}}function Jr(n){return n==="undefined"?void 0:JSON.parse(n)}var Kt=(n,t={})=>{if(Xr(t)){let e=qt(t.defaultValue)?t.defaultValue():t.defaultValue;return vi(n,t,e)}return vi(n,t,void 0)},vi=(n,t,e)=>{let i=qt(t.stringify)?t.stringify:JSON.stringify,r=qt(t.parse)?t.parse:Jr,o=t.storageSync??!0;return gi(Kt,t.injector,()=>{let s=g(Yr),a=g(qe),l=g(We).defaultView;if(!l)throw new Error("Cannot access to window element");let c=Wt(()=>s.getItem(n),null),u=I(c?Wt(()=>r(c),e):e),d=m=>{let v=Wt(()=>m===void 0?null:i(m),null);try{if(v===s.getItem(n))return;v===null?s.removeItem(n):s.setItem(n,v),l.dispatchEvent(new StorageEvent("storage",{key:n,newValue:v,storageArea:s}))}catch{}};if(o){let m=u.set,v=u.update,p=V=>{m(V),d(V)},x=V=>{let j;v(W=>j=V(W)),d(j)};u.set=p,u.update=x;let w=V=>{if(V.storageArea===s&&V.key===n){let j=V.newValue!==null?r(V.newValue):e;u.set(j)}};l.addEventListener("storage",w),a.onDestroy(()=>{l.removeEventListener("storage",w)})}return u})};var _i=(()=>{class n{document=g(We);_theme=Kt("theme",{defaultValue:"dark"});theme=this._theme.asReadonly();onThemeChange=_n(()=>{this.document.documentElement.setAttribute("data-theme",this._theme())});setTheme(e){this._theme.set(e)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var yi=(()=>{class n{themeService=g(_i);isLight=I(this.themeService.theme()==="light");toggleTheme=()=>{this.themeService.setTheme(this.isLight()?"dark":"light")};static \u0275fac=function(i){return new(i||n)};static \u0275cmp=N({type:n,selectors:[["tu-theme-toggle"]],decls:6,vars:1,consts:[[1,"btn","btn-circle","swap","swap-rotate"],["type","checkbox",3,"ngModelChange","click","ngModel"],["xmlns","http://www.w3.org/2000/svg","fill","none",1,"swap-off","size-6"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M12 3v1m0 16v1m-8-9H3m3.314-5.686L5.5 5.5m12.186.814L18.5 5.5M6.314 17.69l-.814.81m12.186-.81.814.81M21 12h-1m-4 0a4 4 0 1 1-8 0 4 4 0 0 1 8 0"],["xmlns","http://www.w3.org/2000/svg","fill","none",1,"swap-on","size-6"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M13 6V3m5.5 9V7m-4-2.5h-3m9.5 5h-5m-.445 7.315a8.3 8.3 0 0 0 3.445-.74A8.37 8.37 0 1 1 7.925 5a8.37 8.37 0 0 0 7.63 11.815"]],template:function(i,r){i&1&&(h(0,"label",0)(1,"input",1),ne("ngModelChange",function(s){return te(r.isLight,s)||(r.isLight=s),s}),C("click",function(){return r.toggleTheme()}),f(),ln(),h(2,"svg",2),A(3,"path",3),f(),h(4,"svg",4),A(5,"path",5),f()()),i&2&&(y(),ee("ngModel",r.isLight))},dependencies:[De,xt,Ce,ce],encapsulation:2,changeDetection:0})}return n})();var Qr=["modal"];function eo(n,t){if(n&1&&(h(0,"div"),A(1,"tu-summary",12),f()),n&2){G();let e=Dt(0),i=Dt(1);y(),Z("totalKm",i.odo)("difference",e.differenceFromExpected)("differenceInDays",e.idleDaysToReachExpectedKm)("isOverExpected",e.isDistanceOverExpected)}}function to(n,t){if(n&1){let e=$();h(0,"tu-empty-odo-state",13),C("addEntryClicked",function(){D(e);let r=G();return b(r.openEntryModal())}),f()}}function no(n,t){if(n&1){let e=$();h(0,"tu-add-odo-form",14),C("submitted",function(){D(e);let r=G(2);return b(r.closeModal())})("canceled",function(){D(e);let r=G(2);return b(r.closeModal())}),f()}}function io(n,t){if(n&1){let e=$();h(0,"tu-leasing-contract",14),C("submitted",function(){D(e);let r=G(2);return b(r.leasingInfoSaved())})("canceled",function(){D(e);let r=G(2);return b(r.closeModal())}),f()}}function ro(n,t){n&1&&(h(0,"p"),_(1,"Unknown dialog component"),f())}function oo(n,t){if(n&1&&k(0,no,1,0,"tu-add-odo-form")(1,io,1,0,"tu-leasing-contract")(2,ro,2,0,"p"),n&2){let e,i=G();R((e=i.dialogComponent())==="add"?0:e==="leasingContract"?1:2)}}var Ma=(()=>{class n{modal=pe.required("modal");dialogComponent=I(null);#e=g(J);#t=g(X);#n=g(Bt);entries=U(this.#t.findAll(),{initialValue:[]});leasingInfo=U(this.#e.leasingInfo$);latestOdoEntry=U(this.#t.findMax());analyticsData=U(this.#n.analyticsData$,{initialValue:{differenceFromExpected:0,expectedOdo:0,idleDaysToReachExpectedKm:0,isDistanceOverExpected:!1}});openEntryModal(){this.modal().nativeElement.showModal(),this.dialogComponent.set("add")}openLeasingInfoModal(){this.modal().nativeElement.showModal(),this.dialogComponent.set("leasingContract")}leasingInfoSaved(){this.closeModal()}closeModal(){this.modal().nativeElement.close(),this.dialogComponent.set(null)}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=N({type:n,selectors:[["tu-dashboard-page"]],viewQuery:function(i,r){i&1&&fe(r.modal,Qr,5),i&2&&me()},features:[q([X,J,Bt])],decls:20,vars:5,consts:[["modal",""],[1,"navbar","gap-2"],[1,"flex-1"],[1,"btn","btn-circle","flex-none",3,"click"],["name","cog"],[1,"flex","flex-col","gap-8","max-sm:px-4"],[3,"analyticsData"],[1,"fixed","right-8","bottom-8"],[1,"btn-circle","btn","btn-accent","btn-lg","shadow-xl",3,"click"],["name","plus","size","36"],[1,"modal"],[1,"modal-box"],[3,"totalKm","difference","differenceInDays","isOverExpected"],[3,"addEntryClicked"],[3,"submitted","canceled"]],template:function(i,r){if(i&1){let o=$();vn(0)(1),h(2,"header")(3,"nav",1),A(4,"div",2)(5,"tu-theme-toggle"),h(6,"button",3),C("click",function(){return D(o),b(r.openLeasingInfoModal())}),A(7,"fast-svg",4),f()()(),h(8,"main",5),k(9,eo,2,4,"div")(10,to,1,0,"tu-empty-odo-state"),h(11,"div"),A(12,"tu-leasing-chart",6),f(),h(13,"div",7)(14,"button",8),C("click",function(){return D(o),b(r.openEntryModal())}),A(15,"fast-svg",9),f()()(),h(16,"dialog",10,0)(18,"div",11),k(19,oo,3,1),f()()}if(i&2){let o=ze(17),s=Ct(r.analyticsData());y();let a=Ct(r.latestOdoEntry());y(8),R(a!=null&&a.odo?9:10),y(3),Z("analyticsData",s),y(7),R(o.open&&r.dialogComponent()?19:-1)}},dependencies:[Ze,li,di,hi,mi,pi,yi],encapsulation:2,changeDetection:0})}return n})();export{Ma as default};
