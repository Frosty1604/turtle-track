import{$ as Xt,A as ne,Aa as vt,B as R,Ba as _t,Ca as W,Ga as on,Ia as yt,Ja as Q,K as y,Ka as q,La as sn,N as Ve,Na as Ct,O as V,R as ae,U as P,V as gt,W as b,X,Y as Yt,Z as k,a as Ue,ab as an,b as De,bb as ln,c as te,cb as fe,d as mt,db as $,ea as Qt,eb as He,f as se,fa as H,ga as Ae,gb as cn,ha as T,i as _,ia as Jt,ja as en,ka as tn,la as h,ma as f,na as M,o as be,oa as L,p as C,pa as E,q as D,qa as j,r as pt,ra as le,sa as ce,t as zt,ta as Be,ua as g,v as Ee,va as nn,w as Zt,wa as ue,xa as de,y as Y,ya as he,z as N,za as rn}from"./chunk-IAKSZIGD.js";import{B as Bt,H as Ge,I as Ht,Q as Wt,S as qt,U as Kt,f as Lt,h as jt,j as $e,l as $t,q as F,r as oe,w as Gt,y as Ut}from"./chunk-5LN5MSON.js";import{a as A,b as I}from"./chunk-KAT7YFEL.js";var K=(()=>{class n{#e=_(an).db;save=e=>(typeof e=="string"&&(e=Number(e)),this.#e.odo.insert({id:crypto.randomUUID(),odo:e,dateTime:new Date().toISOString()}));findAll=(e="asc")=>this.#e.odo.find({sort:[{odo:e}]}).$;findMax=()=>this.#e.odo.findOne({sort:[{odo:"desc"}]}).$;static \u0275fac=function(i){return new(i||n)};static \u0275prov=te({token:n,factory:n.\u0275fac})}return n})();var Dt="leasingInfo",z=(()=>{class n{leasingInfoSubject=new jt(1);leasingInfo$=this.leasingInfoSubject.asObservable();constructor(){let e=this.getLeasingInfo();e&&this.leasingInfoSubject.next(e)}saveLeasingInfo=e=>{localStorage.setItem(Dt,JSON.stringify(e)),this.leasingInfoSubject.next(e)};getLeasingInfo=()=>localStorage.getItem(Dt)?JSON.parse(localStorage.getItem(Dt)):null;static \u0275fac=function(i){return new(i||n)};static \u0275prov=te({token:n,factory:n.\u0275fac})}return n})();var _n=(()=>{class n{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,i){this._renderer=e,this._elementRef=i}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(i){return new(i||n)(V(Ve),V(ne))};static \u0275dir=b({type:n})}return n})(),ri=(()=>{class n extends _n{static \u0275fac=(()=>{let e;return function(r){return(e||(e=pt(n)))(r||n)}})();static \u0275dir=b({type:n,features:[X]})}return n})(),yn=new se("");var oi={provide:yn,useExisting:De(()=>J),multi:!0};function si(){let n=Ct()?Ct().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var ai=new se(""),J=(()=>{class n extends _n{_compositionMode;_composing=!1;constructor(e,i,r){super(e,i),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!si())}writeValue(e){let i=e??"";this.setProperty("value",i)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(i){return new(i||n)(V(Ve),V(ne),V(ai,8))};static \u0275dir=b({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&E("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},standalone:!1,features:[W([oi]),X]})}return n})();function li(n){return n==null||ci(n)===0}function ci(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Oe=new se(""),Cn=new se("");function ui(n){return li(n.value)?{required:!0}:null}function un(n){return null}function Dn(n){return n!=null}function bn(n){return Xt(n)?$t(n):n}function En(n){let t={};return n.forEach(e=>{t=e!=null?A(A({},t),e):t}),Object.keys(t).length===0?null:t}function Vn(n,t){return t.map(e=>e(n))}function di(n){return!n.validate}function An(n){return n.map(t=>di(t)?t:e=>t.validate(e))}function hi(n){if(!n)return null;let t=n.filter(Dn);return t.length==0?null:function(e){return En(Vn(e,t))}}function Et(n){return n!=null?hi(An(n)):null}function fi(n){if(!n)return null;let t=n.filter(Dn);return t.length==0?null:function(e){let i=Vn(e,t).map(bn);return Gt(i).pipe(F(En))}}function Vt(n){return n!=null?fi(An(n)):null}function dn(n,t){return n===null?[t]:Array.isArray(n)?[...n,t]:[n,t]}function mi(n){return n._rawValidators}function pi(n){return n._rawAsyncValidators}function bt(n){return n?Array.isArray(n)?n:[n]:[]}function qe(n,t){return Array.isArray(n)?n.includes(t):n===t}function hn(n,t){let e=bt(t);return bt(n).forEach(r=>{qe(e,r)||e.push(r)}),e}function fn(n,t){return bt(t).filter(e=>!qe(n,e))}var Ke=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Et(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Vt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},ge=class extends Ke{name;get formDirective(){return null}get path(){return null}},Fe=class extends Ke{_parent=null;name=null;valueAccessor=null},ze=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},gi={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},uo=I(A({},gi),{"[class.ng-submitted]":"isSubmitted"}),Qe=(()=>{class n extends ze{constructor(e){super(e)}static \u0275fac=function(i){return new(i||n)(V(Fe,2))};static \u0275dir=b({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&Ae("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[X]})}return n})(),Je=(()=>{class n extends ze{constructor(e){super(e)}static \u0275fac=function(i){return new(i||n)(V(ge,10))};static \u0275dir=b({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&Ae("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},standalone:!1,features:[X]})}return n})();var we="VALID",We="INVALID",me="PENDING",Se="DISABLED",ve=class{},Ze=class extends ve{value;source;constructor(t,e){super(),this.value=t,this.source=e}},xe=class extends ve{pristine;source;constructor(t,e){super(),this.pristine=t,this.source=e}},Ie=class extends ve{touched;source;constructor(t,e){super(),this.touched=t,this.source=e}},pe=class extends ve{status;source;constructor(t,e){super(),this.status=t,this.source=e}};function wn(n){return(et(n)?n.validators:n)||null}function vi(n){return Array.isArray(n)?Et(n):n||null}function Sn(n,t){return(et(t)?t.asyncValidators:n)||null}function _i(n){return Array.isArray(n)?Vt(n):n||null}function et(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function yi(n,t,e){let i=n.controls;if(!(t?Object.keys(i):i).length)throw new Ue(1e3,"");if(!i[e])throw new Ue(1001,"")}function Ci(n,t,e){n._forEachChild((i,r)=>{if(e[r]===void 0)throw new Ue(1002,"")})}var Ye=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,e){this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return Q(this.statusReactive)}set status(t){Q(()=>this.statusReactive.set(t))}_status=q(()=>this.statusReactive());statusReactive=R(void 0);get valid(){return this.status===we}get invalid(){return this.status===We}get pending(){return this.status==me}get disabled(){return this.status===Se}get enabled(){return this.status!==Se}errors;get pristine(){return Q(this.pristineReactive)}set pristine(t){Q(()=>this.pristineReactive.set(t))}_pristine=q(()=>this.pristineReactive());pristineReactive=R(!0);get dirty(){return!this.pristine}get touched(){return Q(this.touchedReactive)}set touched(t){Q(()=>this.touchedReactive.set(t))}_touched=q(()=>this.touchedReactive());touchedReactive=R(!1);get untouched(){return!this.touched}_events=new Lt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(hn(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(hn(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(fn(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(fn(t,this._rawAsyncValidators))}hasValidator(t){return qe(this._rawValidators,t)}hasAsyncValidator(t){return qe(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(I(A({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new Ie(!0,i))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:i})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,i),e&&t.emitEvent!==!1&&this._events.next(new Ie(!1,i))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(I(A({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new xe(!1,i))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=t.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,i),e&&t.emitEvent!==!1&&this._events.next(new xe(!0,i))}markAsPending(t={}){this.status=me;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new pe(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(I(A({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Se,this.errors=null,this._forEachChild(r=>{r.disable(I(A({},t),{onlySelf:!0}))}),this._updateValue();let i=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Ze(this.value,i)),this._events.next(new pe(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(I(A({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=we,this._forEachChild(i=>{i.enable(I(A({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(I(A({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===we||this.status===me)&&this._runAsyncValidator(i,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Ze(this.value,e)),this._events.next(new pe(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(I(A({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Se:we}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=me,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1};let i=bn(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){let i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,i){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||i)&&this._events.next(new pe(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,i)}_initObservables(){this.valueChanges=new Ee,this.statusChanges=new Ee}_calculateStatus(){return this._allControlsDisabled()?Se:this.errors?We:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(me)?me:this._anyControlsHaveStatus(We)?We:we}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),r&&this._events.next(new xe(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new Ie(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){et(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=vi(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=_i(this._rawAsyncValidators)}},Xe=class extends Ye{constructor(t,e,i){super(wn(e),Sn(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){Ci(this,!0,t),Object.keys(t).forEach(i=>{yi(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(i=>{let r=this.controls[i];r&&r.patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t?t[r]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>i._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,i]of Object.entries(this.controls))if(this.contains(e)&&t(i))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,i,r)=>((i.enabled||this.disabled)&&(e[r]=i.value),e))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,o)=>{i=e(i,r,o)}),i}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var At=new se("",{providedIn:"root",factory:()=>wt}),wt="always";function Di(n,t){return[...t.path,n]}function Mn(n,t,e=wt){xn(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(n.disabled),Ei(n,t),Ai(n,t),Vi(n,t),bi(n,t)}function mn(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function bi(n,t){if(t.valueAccessor.setDisabledState){let e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}function xn(n,t){let e=mi(n);t.validator!==null?n.setValidators(dn(e,t.validator)):typeof e=="function"&&n.setValidators([e]);let i=pi(n);t.asyncValidator!==null?n.setAsyncValidators(dn(i,t.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();mn(t._rawValidators,r),mn(t._rawAsyncValidators,r)}function Ei(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&In(n,t)})}function Vi(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&In(n,t),n.updateOn!=="submit"&&n.markAsTouched()})}function In(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Ai(n,t){let e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}function wi(n,t){n==null,xn(n,t)}function Si(n,t){if(!n.hasOwnProperty("model"))return!1;let e=n.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function Mi(n){return Object.getPrototypeOf(n.constructor)===ri}function xi(n,t){n._syncPendingControls(),t.forEach(e=>{let i=e.control;i.updateOn==="submit"&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function Ii(n,t){if(!t)return null;Array.isArray(t);let e,i,r;return t.forEach(o=>{o.constructor===J?e=o:Mi(o)?i=o:r=o}),r||i||e||null}var Fi={provide:ge,useExisting:De(()=>Ne)},Me=Promise.resolve(),Ne=(()=>{class n extends ge{callSetDisabledState;get submitted(){return Q(this.submittedReactive)}_submitted=q(()=>this.submittedReactive());submittedReactive=R(!1);_directives=new Set;form;ngSubmit=new Ee;options;constructor(e,i,r){super(),this.callSetDisabledState=r,this.form=new Xe({},Et(e),Vt(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){Me.then(()=>{let i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),Mn(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){Me.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){Me.then(()=>{let i=this._findContainer(e.path),r=new Xe({});wi(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){Me.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){Me.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submittedReactive.set(!0),xi(this.form,this._directives),this.ngSubmit.emit(e),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static \u0275fac=function(i){return new(i||n)(V(Oe,10),V(Cn,10),V(At,8))};static \u0275dir=b({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){i&1&&E("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[W([Fi]),X]})}return n})();function pn(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function gn(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Oi=class extends Ye{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,e,i){super(wn(e),Sn(i,e)),this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),et(e)&&(e.nonNullable||e.initialValueIsDefault)&&(gn(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){pn(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){pn(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){gn(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var Ni={provide:Fe,useExisting:De(()=>Pe)},vn=Promise.resolve(),Pe=(()=>{class n extends Fe{_changeDetectorRef;callSetDisabledState;control=new Oi;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Ee;constructor(e,i,r,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=Ii(this,o)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),Si(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Mn(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){vn.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let i=e.isDisabled.currentValue,r=i!==0&&yt(i);vn.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?Di(e,this._parent):[e]}static \u0275fac=function(i){return new(i||n)(V(ge,9),V(Oe,10),V(Cn,10),V(yn,10),V(on,8),V(At,8))};static \u0275dir=b({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[W([Ni]),X,be]})}return n})();var tt=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=b({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var Pi=(()=>{class n{_validator=un;_onChange;_enabled;ngOnChanges(e){if(this.inputName in e){let i=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):un,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return e!=null}static \u0275fac=function(i){return new(i||n)};static \u0275dir=b({type:n,features:[be]})}return n})();var ki={provide:Oe,useExisting:De(()=>ke),multi:!0};var ke=(()=>{class n extends Pi{required;inputName="required";normalizeInput=yt;createValidator=e=>ui;enabled(e){return e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=pt(n)))(r||n)}})();static \u0275dir=b({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,r){i&2&&Qt("required",r._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[W([ki]),X]})}return n})();var Ti=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=gt({type:n});static \u0275inj=mt({})}return n})();var nt=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:At,useValue:e.callSetDisabledState??wt}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=gt({type:n});static \u0275inj=mt({imports:[Ti]})}return n})();function On(n){let{anchorOffset:t=0,focusOffset:e=0}=n.ownerDocument.getSelection()||{},i=Math.min(t,e),r=Math.max(t,e);return[i,r]}function Ri(n,[t,e]){var i,r,o,s;let a=n.ownerDocument,l=a.createRange();l.setStart(n.firstChild||n,Math.min(t,(r=(i=n.textContent)===null||i===void 0?void 0:i.length)!==null&&r!==void 0?r:0)),l.setEnd(n.lastChild||n,Math.min(e,(s=(o=n.textContent)===null||o===void 0?void 0:o.length)!==null&&s!==void 0?s:0));let c=a.getSelection();c&&(c.removeAllRanges(),c.addRange(l))}var Mt=class{constructor(t){this.element=t,this.maxLength=1/0}get value(){return this.element.innerText.replace(/\n\n$/,`
`)}set value(t){this.element.innerHTML=t.replace(/\n$/,`

`)}get selectionStart(){return On(this.element)[0]}get selectionEnd(){return On(this.element)[1]}setSelectionRange(t,e){Ri(this.element,[t??0,e??0])}select(){this.setSelectionRange(0,this.value.length)}};function Li(n){let t=new Mt(n);return new Proxy(n,{get(e,i){if(i in t)return t[i];let r=e[i];return typeof r=="function"?r.bind(e):r},set(e,i,r,o){return Reflect.set(i in t?t:e,i,r,o)}})}var Tn=n=>n.isContentEditable?Li(n):n.querySelector("input,textarea")||n,je={mask:/^.*$/,preprocessors:[],postprocessors:[],plugins:[],overwriteMode:"shift"},xt=class{constructor(){this.now=null,this.past=[],this.future=[]}undo(){let t=this.past.pop();t&&this.now&&(this.future.push(this.now),this.updateElement(t,"historyUndo"))}redo(){let t=this.future.pop();t&&this.now&&(this.past.push(this.now),this.updateElement(t,"historyRedo"))}updateHistory(t){if(!this.now){this.now=t;return}let e=this.now.value!==t.value,i=this.now.selection.some((r,o)=>r!==t.selection[o]);!e&&!i||(e&&(this.past.push(this.now),this.future=[]),this.now=t)}updateElement(t,e){this.now=t,this.updateElementState(t,{inputType:e,data:null})}};function ji(n,...t){return t.every(({value:e})=>e===n.value)}function It(n,...t){return t.every(({value:e,selection:i})=>e===n.value&&i[0]===n.selection[0]&&i[1]===n.selection[1])}function $i({value:n,selection:t},e,i){let[r,o]=t,s=typeof i=="function"?i({value:n,selection:t}):i;return{value:n,selection:s==="replace"?[r,Math.max(r+e.length,o)]:[r,o]}}function at(n){return typeof n=="string"}function Nn(n,t,e,i){let r="";for(let o=t.length;o<n.length;o++){let s=n[o]||"",a=i?.value[o]===s;if(!at(s)||s===e&&!a)return r;r+=s}return r}function Rn(n,t){return Array.isArray(t)?n.length===t.length&&Array.from(n).every((e,i)=>{let r=t[i]||"";return at(r)?e===r:e.match(r)}):t.test(n)}function Gi(n,t,e){let i=null,r=null,o=Array.from(n.value).reduce((a,l,c)=>{let u=Nn(t,a,l,e),d=a+u,m=t[d.length]||"";return i===null&&c>=n.selection[0]&&(i=d.length),r===null&&c>=n.selection[1]&&(r=d.length),at(m)?d+m:l.match(m)?d+l:d},""),s=Nn(t,o,"",e);return{value:Rn(o+s,t)?o+s:o,selection:[i??o.length,r??o.length]}}function Ui({value:n,selection:t},e){let[i,r]=t,o=i,s=r,a=Array.from(n).reduce((l,c,u)=>{let d=l+c;return i===u&&(o=l.length),r===u&&(s=l.length),d.match(e)?d:l},"");return{value:a,selection:[Math.min(o,a.length),Math.min(s,a.length)]}}function it(n,t,e=null){if(Rn(n.value,t))return n;let{value:i,selection:r}=Array.isArray(t)?Gi(n,t,e):Ui(n,t);return{selection:r,value:Array.isArray(t)?i.slice(0,t.length):i}}function Pn(n,t){if(!Array.isArray(t))return n;let[e,i]=n.selection,r=[],o=Array.from(n.value).reduce((s,a,l)=>{let c=t[l]||"";return l===e&&r.push(s.length),l===i&&r.push(s.length),at(c)&&c===a?s:s+a},"");return r.length<2&&r.push(...new Array(2-r.length).fill(o.length)),{value:o,selection:[r[0],r[1]]}}var Le=class{constructor(t,e){this.initialElementState=t,this.maskOptions=e,this.value="",this.selection=[0,0];let{value:i,selection:r}=it(this.initialElementState,this.getMaskExpression(this.initialElementState));this.value=i,this.selection=r}addCharacters([t,e],i){let{value:r,maskOptions:o}=this,s=this.getMaskExpression({value:r.slice(0,t)+i+r.slice(e),selection:[t+i.length,t+i.length]}),a={value:r,selection:[t,e]},l=Pn(a,s),[c,u]=$i(l,i,o.overwriteMode).selection,d=l.value.slice(0,c)+i,m=d.length,v=it({value:d+l.value.slice(u),selection:[m,m]},s,a);if(r.slice(0,t)===it({value:d,selection:[m,m]},s,a).value||It(this,v))throw new Error("Invalid mask value");this.value=v.value,this.selection=v.selection}deleteCharacters([t,e]){if(t===e||!e)return;let{value:i}=this,r=this.getMaskExpression({value:i.slice(0,t)+i.slice(e),selection:[t,t]}),o={value:i,selection:[t,e]},s=Pn(o,r),[a,l]=s.selection,c=s.value.slice(0,a)+s.value.slice(l),u=it({value:c,selection:[a,a]},r,o);this.value=u.value,this.selection=u.selection}getMaskExpression(t){let{mask:e}=this.maskOptions;return typeof e=="function"?e(t):e}};var rt=class{constructor(t){this.element=t,this.listeners=[]}listen(t,e,i){let r=e;this.element.addEventListener(t,r,i),this.listeners.push(()=>this.element.removeEventListener(t,r,i))}destroy(){this.listeners.forEach(t=>t())}},G={CTRL:1,ALT:2,SHIFT:4,META:8},Te={Y:89,Z:90};function Re(n,t,e){return n.ctrlKey===!!(t&G.CTRL)&&n.altKey===!!(t&G.ALT)&&n.shiftKey===!!(t&G.SHIFT)&&n.metaKey===!!(t&G.META)&&n.keyCode===e}function Bi(n){return Re(n,G.CTRL,Te.Y)||Re(n,G.CTRL|G.SHIFT,Te.Z)||Re(n,G.META|G.SHIFT,Te.Z)}function Hi(n){return Re(n,G.CTRL,Te.Z)||Re(n,G.META,Te.Z)}function lt(n,t){var e;let i=n.value;if(typeof t=="string")n.value=t;else{let[r,o]=t.selection;n.value=t.value,n.matches(":focus")&&((e=n.setSelectionRange)===null||e===void 0||e.call(n,r,o))}n.value!==i&&n.dispatchEvent(new Event("input",{bubbles:!0}))}function Wi({value:n,selection:t},e){let[i,r]=t;if(i!==r)return[i,r];let o=e?n.slice(i).indexOf(`
`)+1||n.length:n.slice(0,r).lastIndexOf(`
`)+1;return[e?i:o,e?o:r]}function qi({value:n,selection:t},e){let[i,r]=t;return i!==r?[i,r]:(e?[i,r+1]:[i-1,r]).map(s=>Math.min(Math.max(s,0),n.length))}var Ki=/\s+$/g,zi=/^\s+/g,kn=/\s/;function Zi({value:n,selection:t},e){let[i,r]=t;if(i!==r)return[i,r];if(e){let l=n.slice(i),[c]=l.match(zi)||[""],u=l.trimStart().search(kn);return[i,u!==-1?i+c.length+u:n.length]}let o=n.slice(0,r),[s]=o.match(Ki)||[""],a=o.trimEnd().split("").reverse().findIndex(l=>kn.exec(l));return[a!==-1?r-s.length-a:0,r]}function ot(n=[]){return(t,...e)=>n.reduce((i,r)=>Object.assign(Object.assign({},i),r(i,...e)),t)}function _e(n,t){let e=Object.assign(Object.assign({},je),t),i=ot(e.preprocessors),r=ot(e.postprocessors),o=typeof n=="string"?{value:n,selection:[0,0]}:n,{elementState:s}=i({elementState:o,data:""},"validation"),a=new Le(s,e),{value:l,selection:c}=r(a,o);return typeof n=="string"?l:{value:l,selection:c}}var St=" ";function Yi(){let n="",t=0,e=null,i=!1;return r=>{let o=new rt(r);return o.listen("beforeinput",s=>{var a,l;let{value:c,selectionStart:u,selectionEnd:d}=r,m=e?.inputType==="insertText"&&e?.data===St&&!c.slice(0,Number(d)).endsWith(St);s.inputType==="insertText"&&s.data===`.${St}`&&(e?.inputType==="deleteContentBackward"&&i?(r.value=n,(a=r.setSelectionRange)===null||a===void 0||a.call(r,t,t)):m&&((l=r.setSelectionRange)===null||l===void 0||l.call(r,u,u))),i=m,e=s,n=c,t=Number((m?t:d)===c.length?d:u)}),()=>o.destroy()}}var Xi=[Yi()],st=class extends xt{constructor(t,e){super(),this.element=t,this.maskitoOptions=e,this.isTextArea=this.element.nodeName==="TEXTAREA",this.eventListener=new rt(this.element),this.options=Object.assign(Object.assign({},je),this.maskitoOptions),this.upcomingElementState=null,this.preprocessor=ot(this.options.preprocessors),this.postprocessor=ot(this.options.postprocessors),this.teardowns=this.options.plugins.concat(Xi).map(i=>i(this.element,this.options)),this.updateHistory(this.elementState),this.eventListener.listen("keydown",i=>{if(Bi(i))return i.preventDefault(),this.redo();if(Hi(i))return i.preventDefault(),this.undo()}),this.eventListener.listen("beforeinput",i=>{var r,o,s;let a=i.inputType.includes("Forward");switch(this.updateHistory(this.elementState),i.inputType){case"deleteByCut":case"deleteContentBackward":case"deleteContentForward":return this.handleDelete({event:i,isForward:a,selection:qi(this.elementState,a)});case"deleteHardLineBackward":case"deleteHardLineForward":case"deleteSoftLineBackward":case"deleteSoftLineForward":return this.handleDelete({event:i,isForward:a,selection:Wi(this.elementState,a),force:!0});case"deleteWordBackward":case"deleteWordForward":return this.handleDelete({event:i,isForward:a,selection:Zi(this.elementState,a),force:!0});case"historyRedo":return i.preventDefault(),this.redo();case"historyUndo":return i.preventDefault(),this.undo();case"insertCompositionText":return;case"insertLineBreak":case"insertParagraph":return this.handleEnter(i);case"insertReplacementText":return;case"insertFromDrop":case"insertFromPaste":case"insertText":default:return this.handleInsert(i,(s=(r=i.data)!==null&&r!==void 0?r:(o=i.dataTransfer)===null||o===void 0?void 0:o.getData("text/plain"))!==null&&s!==void 0?s:"")}}),this.eventListener.listen("input",()=>{this.upcomingElementState&&(this.updateElementState(this.upcomingElementState),this.upcomingElementState=null)},{capture:!0}),this.eventListener.listen("input",({inputType:i})=>{i!=="insertCompositionText"&&(this.ensureValueFitsMask(),this.updateHistory(this.elementState))}),this.eventListener.listen("compositionend",()=>{this.ensureValueFitsMask(),this.updateHistory(this.elementState)})}destroy(){this.eventListener.destroy(),this.teardowns.forEach(t=>t?.())}updateElementState({value:t,selection:e},i){let r=this.elementState.value;this.updateValue(t),this.updateSelectionRange(e),i&&r!==t&&this.dispatchInputEvent(i)}get elementState(){let{value:t,selectionStart:e,selectionEnd:i}=this.element;return{value:t,selection:[e??0,i??0]}}get maxLength(){let{maxLength:t}=this.element;return t===-1?1/0:t}updateSelectionRange([t,e]){var i;let{element:r}=this;r.matches(":focus")&&(r.selectionStart!==t||r.selectionEnd!==e)&&((i=r.setSelectionRange)===null||i===void 0||i.call(r,t,e))}updateValue(t){this.element.value=t}ensureValueFitsMask(){this.updateElementState(_e(this.elementState,this.options),{inputType:"insertText",data:null})}dispatchInputEvent(t={inputType:"insertText",data:null}){globalThis.InputEvent&&this.element.dispatchEvent(new InputEvent("input",Object.assign(Object.assign({},t),{bubbles:!0,cancelable:!1})))}handleDelete({event:t,selection:e,isForward:i,force:r=!1}){let o={value:this.elementState.value,selection:e},[s,a]=o.selection,{elementState:l}=this.preprocessor({elementState:o,data:""},i?"deleteForward":"deleteBackward"),c=new Le(l,this.options),[u,d]=l.selection;c.deleteCharacters([u,d]);let m=this.postprocessor(c,o),v={value:o.value.slice(0,s)+o.value.slice(a),selection:[s,s]};if(!(It(v,m)&&!r&&!this.element.isContentEditable)){if(ji(o,l,c,m))return t.preventDefault(),this.updateSelectionRange(i?[d,d]:[u,u]);this.upcomingElementState=m}}handleInsert(t,e){let{options:i,maxLength:r,element:o,elementState:s}=this,{elementState:a,data:l=e}=this.preprocessor({data:e,elementState:s},"insert"),c=new Le(a,i);try{c.addCharacters(a.selection,l)}catch{return t.preventDefault()}let[u,d]=s.selection,m={value:s.value.slice(0,u)+e+s.value.slice(d),selection:[u+e.length,u+e.length]},v=this.postprocessor(c,s);if(v.value.length>r)return t.preventDefault();(!It(m,v)||o.isContentEditable)&&(this.upcomingElementState=v,i.overwriteMode==="replace"&&m.value.length>r&&this.dispatchInputEvent({inputType:"insertText",data:e}))}handleEnter(t){(this.isTextArea||this.element.isContentEditable)&&this.handleInsert(t,`
`)}};var ct=(()=>{class n{constructor(){this.elementRef=_(ne).nativeElement,this.ngZone=_(Zt),this.maskedElement=null,this.options=null,this.elementPredicate=Tn;let e=_(J,{self:!0,optional:!0});if(e){let i=e.writeValue.bind(e);e.writeValue=r=>{i(this.options?_e(String(r??""),this.options):r)}}}async ngOnChanges(){let{elementPredicate:e,options:i,maskedElement:r,elementRef:o,ngZone:s}=this;if(r?.destroy(),!i)return;let a=await e(o);this.elementPredicate!==e||this.options!==i||s.runOutsideAngular(()=>{this.maskedElement=new st(a,i)})}ngOnDestroy(){this.maskedElement?.destroy()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=b({type:n,selectors:[["","maskito",""]],inputs:{options:[0,"maskito","options"],elementPredicate:[0,"maskitoElement","elementPredicate"]},features:[be]})}}return n})();function ut(n,t,e){let i=Math.min(Number(e),Math.max(Number(t),Number(n)));return n instanceof Date?new Date(i):i}var Ji=[".",",","\u0431","\u044E"];var Ot="\xA0",er="\u200B",Un="\u2013",Bn="\u2014",dt="-",Ft="\u2212",Hn="\u30FC";var Eo=new RegExp(`[${Ot}APM]+$`,"g"),Vo=new RegExp(`${Ot}[AP]M$`,"g"),tr=[":","."];function ye(n){return n}function nr(){}var Wn=/[\\^$.*+?()[\]{}|]/g,ir=new RegExp(Wn.source);function S(n){return n&&ir.test(n)?n.replaceAll(Wn,String.raw`\$&`):n}function U(n,{prefix:t,postfix:e}){var i,r;let o=new RegExp(`^${S(t)}`),s=new RegExp(`${S(e)}$`),[a=""]=(i=n.match(o))!==null&&i!==void 0?i:[],[l=""]=(r=n.match(s))!==null&&r!==void 0?r:[];return{extractedPrefix:a,extractedPostfix:l,cleanValue:a||l?n.slice(a.length,l.length?-l.length:1/0):n}}function rr(n,t){let e="";for(let i=0;i<n.length;i++){if(n[i]!==t[i])return e;e+=n[i]}return e}function Ln(n){return n.replaceAll(/[０-９]/g,t=>String.fromCharCode(t.charCodeAt(0)-65248))}function or(){return({elementState:n,data:t})=>{let{value:e,selection:i}=n;return{elementState:{selection:i,value:Ln(e)},data:Ln(t)}}}var Ao=new RegExp(`[${tr.map(S).join("")}]$`);function sr(n){let t=new RegExp(`${S(n)}$`);return n?({value:e,selection:i},r)=>{if(!e&&!r.value.endsWith(n))return{value:e,selection:i};if(!e.endsWith(n)&&!r.value.endsWith(n))return{selection:i,value:e+n};let o=r.value.replace(t,""),s=r.selection[1]>o.length,a=rr(o,e);return{selection:i,value:Array.from(n).reverse().reduce((l,c,u)=>{let d=l.length-1-u,m=a[d]===c&&s;return l[d]!==c||m?l.slice(0,d+1)+c+l.slice(d+1):l},e)}}:ye}function ar(n){return n?({value:t,selection:e},i)=>{if(t.startsWith(n)||!t&&!i.value.startsWith(n))return{value:t,selection:e};let[r,o]=e,s=Array.from(n).reduce((l,c,u)=>l[u]===c?l:l.slice(0,u)+c+l.slice(u),t),a=s.length-t.length;return{selection:[r+a,o+a],value:s}}:ye}function Nt(n,t,e){return(i,r)=>{let o=()=>t(i,r);return i.addEventListener(n,o,e),()=>i.removeEventListener(n,o,e)}}var wo=Intl.DateTimeFormat("en-US",{month:"2-digit",day:"2-digit",year:"numeric"});function lr({prefix:n,postfix:t}){return({elementState:e,data:i})=>{let{cleanValue:r}=U(i,{prefix:n,postfix:t});return{elementState:e,data:r}}}function qn({decimalSeparator:n,isNegativeAllowed:t,maximumFractionDigits:e,thousandSeparator:i,prefix:r,postfix:o,decimalPseudoSeparators:s=[],pseudoMinuses:a=[],minusSign:l}){let c=jn(r),u=String.raw`\d`,d=t?`[${l}${a.map(w=>`\\${w}`).join("")}]?`:"",m=i?`[${u}${S(i).replaceAll(/\s/g,String.raw`\s`)}]*`:`[${u}]*`,v=Number.isFinite(e)?e:"",p=e>0?`([${S(n)}${s.map(S).join("")}]${u}{0,${v}})?`:"",x=jn(o);return new RegExp(`^${c}${d}${m}${p}${x}$`)}function jn(n){return n?`${n.split("").map(t=>`${S(t)}?`).join("")}`:""}function Pt(n,t="."){let e=!!new RegExp(`^\\D*[${Ft}\\${dt}${Un}${Bn}${Hn}]`).exec(n),i=S(t),r=n.replaceAll(new RegExp(`${i}(?!\\d)`,"g"),"").replaceAll(new RegExp(`[^\\d${i}]`,"g"),"").replace(t,t&&".");return r?+`${e?dt:""}${r}`:NaN}function cr(n){var t;let e=String(n),[i="",r]=e.split("e-"),o=e;if(r){let[,s]=i.split("."),a=Number(r)+((t=s?.length)!==null&&t!==void 0?t:0);o=n.toFixed(a)}return o}function Kn(n,{decimalSeparator:t,minusSign:e}){let[i="",r=""]=t?n.split(t):[n],o=S(e),[,s="",a=""]=new RegExp(`^(?:[^\\d${o}])?(${o})?(.*)`).exec(i)||[];return{minus:s,integerPart:a,decimalPart:r}}function ur({decimalSeparator:n,thousandSeparator:t,decimalPseudoSeparators:e=Ji}){return e.filter(i=>i!==t&&i!==n)}function dr({decimalSeparator:n,minimumFractionDigits:t,prefix:e,postfix:i}){return t?({value:r,selection:o})=>{let{cleanValue:s,extractedPrefix:a,extractedPostfix:l}=U(r,{prefix:e,postfix:i});if(Number.isNaN(Pt(s,n)))return{value:r,selection:o};let[c,u=""]=s.split(n);return{value:a+c+n+u.padEnd(t,"0")+l,selection:o}}:ye}function hr({prefix:n,postfix:t,decimalSeparator:e,minusSign:i}){return({value:r,selection:o})=>{let[s]=o,{cleanValue:a,extractedPrefix:l,extractedPostfix:c}=U(r,{prefix:n,postfix:t}),{minus:u,integerPart:d,decimalPart:m}=Kn(a,{decimalSeparator:e,minusSign:i}),v=!d&&!m&&!!e&&a.includes(e);return!d&&!Number(m)&&s===(u+l).length||v?{selection:o,value:l+u+c}:{value:r,selection:o}}}function fr({decimalSeparator:n,decimalPseudoSeparators:t,pseudoMinuses:e,prefix:i,postfix:r,minusSign:o}){let s=!0,a=qn({decimalSeparator:n,decimalPseudoSeparators:t,pseudoMinuses:e,prefix:"",postfix:"",thousandSeparator:"",maximumFractionDigits:1/0,isNegativeAllowed:!0,minusSign:o});return({elementState:l,data:c})=>{if(!s)return{elementState:l,data:c};s=!1;let{value:u,selection:d}=l,[m,v]=d,{extractedPrefix:p,cleanValue:x,extractedPostfix:w}=U(u,{prefix:i,postfix:r}),B=_e({selection:[Math.max(m-p.length,0),ut(v-p.length,0,x.length)],value:x},{mask:a}),[ie,Z]=B.selection;return{elementState:{selection:[ie+p.length,Z+p.length],value:p+B.value+w},data:c}}}function mr({decimalSeparator:n,thousandSeparator:t,prefix:e,postfix:i}){let r=s=>{let a=S(t);return s.replace(new RegExp(`^(\\D+)?[0${a}]+(?=0)`),"$1").replace(new RegExp(`^(\\D+)?[0${a}]+(?=[1-9])`),"$1")},o=(s,a)=>{let l=s.slice(0,a),c=s.slice(a).startsWith("0");return l.length-r(l).length+(c?1:0)};return({value:s,selection:a})=>{let[l,c]=a,{cleanValue:u,extractedPrefix:d,extractedPostfix:m}=U(s,{prefix:e,postfix:i}),v=!!n&&u.includes(n),[p="",x=""]=n?u.split(n):[u],w=r(p);if(p===w)return{value:s,selection:a};let B=l-o(s,l),ie=c-o(s,c);return{value:d+w+(v?n:"")+x+m,selection:[Math.max(B,0),Math.max(ie,0)]}}}function pr({min:n,max:t,decimalSeparator:e,minusSign:i}){return({value:r,selection:o})=>{let s=Pt(r,e),a=s>0?Math.min(s,t):Math.max(s,n);if(s&&a!==s){let l=`${a}`.replace(".",e).replace(dt,i);return{value:l,selection:[l.length,l.length]}}return{value:r,selection:o}}}function gr({decimalSeparator:n,thousandSeparator:t,minimumFractionDigits:e}){return({elementState:i,data:r},o)=>{let{value:s,selection:a}=i,[l,c]=a,u=s.slice(l,c),d=e?[n,t]:[t],m=!!e&&l>s.indexOf(n)&&!!u.match(/^0+$/gi);return o!=="deleteBackward"&&o!=="deleteForward"||!d.includes(u)&&!m?{elementState:i,data:r}:{elementState:{value:s,selection:o==="deleteForward"?[c,c]:[l,l]},data:r}}}function vr({decimalSeparator:n,maximumFractionDigits:t,prefix:e,postfix:i}){let r=new RegExp(`^\\D*${S(n)}`);return({elementState:o,data:s})=>{let{value:a,selection:l}=o,{cleanValue:c,extractedPrefix:u}=U(a,{prefix:e,postfix:i}),[d,m]=l,v=ut(d-u.length,0,c.length),p=ut(m-u.length,0,c.length);if(t<=0||c.slice(0,v).includes(n)||c.slice(p).includes(n)||!s.match(r))return{elementState:o,data:s};let x=/\d+/.exec(c.slice(0,v));return{elementState:o,data:x?s:`0${s}`}}}function $n({validCharacter:n,pseudoCharacters:t,prefix:e,postfix:i}){let r=new RegExp(`[${t.join("")}]`,"gi");return({elementState:o,data:s})=>{let{value:a,selection:l}=o,{cleanValue:c,extractedPostfix:u,extractedPrefix:d}=U(a,{prefix:e,postfix:i});return{elementState:{selection:l,value:d+c.replace(r,n)+u},data:s.replace(r,n)}}}function _r({decimalSeparator:n,prefix:t,postfix:e}){return n?({elementState:i,data:r})=>{let{value:o,selection:s}=i,[a,l]=s,{cleanValue:c}=U(o,{prefix:t,postfix:e});return{elementState:i,data:!c.includes(n)||o.slice(a,l+1).includes(n)?r:r.replaceAll(new RegExp(S(n),"gi"),"")}}:ye}function yr({thousandSeparator:n,decimalSeparator:t,prefix:e,postfix:i,minusSign:r}){if(!n)return ye;let o=(...s)=>s.every(a=>/\s/.test(a));return({value:s,selection:a})=>{let[l,c]=a,[u,d]=a,{cleanValue:m,extractedPostfix:v,extractedPrefix:p}=U(s,{prefix:e,postfix:i}),{minus:x,integerPart:w,decimalPart:B}=Kn(m,{decimalSeparator:t,minusSign:r}),ie=t&&m.includes(t),Z=m.length-(x+w+(ie?t+B:"")).length;Z>0&&l&&l<=Z&&(u-=Z),Z>0&&c&&c<=Z&&(d-=Z);let ii=Array.from(w).reduceRight((re,Ce,ee)=>{let ft=!(!ee&&Ce===n)&&!!re.length&&(re.length+1)%4===0,Rt=Ce===n||o(Ce,n);return ft&&Rt?n+re:!ft&&Rt?(ee&&ee<=l&&u--,ee&&ee<=c&&d--,re):ft?(ee<l&&u++,ee<c&&d++,Ce+n+re):Ce+re},"");return{value:p+x+ii+(ie?t:"")+B+v,selection:[u,d]}}}function Cr({maximumFractionDigits:n,decimalSeparator:t,prefix:e,postfix:i}){if(n>0||!t)return ye;let r=new RegExp(`${S(t)}.*$`,"g");return({elementState:o,data:s})=>{let{value:a,selection:l}=o,{cleanValue:c,extractedPrefix:u,extractedPostfix:d}=U(a,{prefix:e,postfix:i}),[m,v]=l,p=u+c.replace(r,"")+d;return{elementState:{selection:[Math.min(m,p.length),Math.min(v,p.length)],value:p},data:s.replace(r,"")}}}var Gn=[0,0];function Dr({decimalSeparator:n,thousandSeparator:t,prefix:e,postfix:i}){let r=mr({decimalSeparator:n,thousandSeparator:t,prefix:e,postfix:i});return Nt("blur",o=>{let s=r({value:o.value,selection:Gn},{value:"",selection:Gn}).value;lt(o,s)},{capture:!0})}function br({min:n,max:t,decimalSeparator:e}){return Nt("blur",(i,r)=>{let o=Pt(i.value,e),s=ut(o,n,t);!Number.isNaN(o)&&o!==s&&lt(i,_e(cr(s),r))},{capture:!0})}function Er({decimalSeparator:n,prefix:t,postfix:e}){return n?Nt("blur",i=>{let{cleanValue:r,extractedPostfix:o,extractedPrefix:s}=U(i.value,{prefix:t,postfix:e}),a=s+r.replace(new RegExp(`^(\\D+)?${S(n)}`),`$10${n}`)+o;lt(i,a)},{capture:!0}):nr}function zn({max:n=Number.MAX_SAFE_INTEGER,min:t=Number.MIN_SAFE_INTEGER,precision:e=0,thousandSeparator:i=Ot,decimalSeparator:r=".",decimalPseudoSeparators:o,decimalZeroPadding:s=!1,prefix:a="",postfix:l="",minusSign:c=Ft,maximumFractionDigits:u=e,minimumFractionDigits:d=s?u:0}={}){let m=[dt,Un,Bn,Hn,Ft].filter(w=>w!==i&&w!==r&&w!==c),v=ur({decimalSeparator:r,thousandSeparator:i,decimalPseudoSeparators:o}),p=a.endsWith(r)&&u>0?`${a}${er}`:a,x=fr({decimalSeparator:r,decimalPseudoSeparators:v,pseudoMinuses:m,prefix:p,postfix:l,minusSign:c});return r=u<=0&&r===i?"":r,Object.assign(Object.assign({},je),{mask:qn({decimalSeparator:r,maximumFractionDigits:u,thousandSeparator:i,prefix:p,postfix:l,isNegativeAllowed:t<0,minusSign:c}),preprocessors:[or(),x,lr({prefix:p,postfix:l}),$n({validCharacter:c,pseudoCharacters:m,prefix:p,postfix:l}),$n({validCharacter:r,pseudoCharacters:v,prefix:p,postfix:l}),vr({decimalSeparator:r,maximumFractionDigits:u,prefix:p,postfix:l}),gr({decimalSeparator:r,minimumFractionDigits:d,thousandSeparator:i}),Cr({maximumFractionDigits:u,decimalSeparator:r,prefix:p,postfix:l}),_r({decimalSeparator:r,prefix:p,postfix:l})],postprocessors:[pr({decimalSeparator:r,min:t,max:n,minusSign:c}),ar(p),sr(l),yr({decimalSeparator:r,thousandSeparator:i,prefix:p,postfix:l,minusSign:c}),dr({decimalSeparator:r,prefix:p,postfix:l,minimumFractionDigits:Math.min(d,u)}),hr({prefix:p,postfix:l,decimalSeparator:r,minusSign:c})],plugins:[Dr({decimalSeparator:r,thousandSeparator:i,prefix:p,postfix:l}),Er({decimalSeparator:r,prefix:p,postfix:l}),br({min:t,max:n,decimalSeparator:r})],overwriteMode:d>0?({value:w,selection:[B]})=>B<=w.indexOf(r)?"shift":"replace":"shift"})}var ht=(()=>{class n{maskitoDirective=_(ct);ngOnInit(){this.maskitoDirective.options=zn({decimalSeparator:",",thousandSeparator:".",maximumFractionDigits:2})}static \u0275fac=function(i){return new(i||n)};static \u0275dir=b({type:n,selectors:[["input","tuKmInput",""]],features:[Yt([ct])]})}return n})();var Vr=["form"];function Ar(n,t){if(n&1){let e=L();h(0,"button",14),E("click",function(){C(e);let r=j();return D(r.resetOdo())}),M(1,"fast-svg",15),f()}}function wr(n,t){if(n&1){let e=L();h(0,"button",16),E("click",function(){let r=C(e).$implicit,o=j();return D(o.increaseODO(r))}),g(1),f()}if(n&2){let e=t.$implicit;y(),nn(" +",e," ")}}var Zn=(()=>{class n{#e=_(K);increaseValues=[50,100,250,500];form=ae.required("form");latestOdoEntry=$(this.#e.findMax());odometer=sn(()=>this.latestOdoEntry()?.odo??0);showReset=q(()=>this.odometer()!==this.latestOdoEntry()?.odo);submitted=Y();canceled=Y();increaseODO(e){this.odometer.update(i=>(i??0)+e)}cancel(){this.canceled.emit()}async submit(){if(this.form().invalid){console.warn("Invalid form");return}await this.#e.save(this.odometer()),this.submitted.emit()}resetOdo(){this.odometer.set(this.latestOdoEntry()?.odo??0)}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=P({type:n,selectors:[["tu-add-odo-form"]],viewQuery:function(i,r){i&1&&le(r.form,Vr,5),i&2&&ce()},hostAttrs:[1,"block","m-4"],outputs:{submitted:"submitted",canceled:"canceled"},decls:19,vars:2,consts:[["form","ngForm"],[1,"flex","items-center","justify-center","flex-col","gap-2",3,"ngSubmit"],[1,"flex","flex-row","justify-between","items-center","w-full"],[1,"text-2xl"],["type","button",1,"btn","btn-ghost","btn-sm","btn-circle"],[1,"input","input-lg","input-bordered","w-full","flex","items-center","gap-2"],["name","odometer","required","","tuKmInput","","inputmode","numeric",1,"grow","text-right",3,"ngModelChange","ngModel"],[1,"label"],[1,"label-text"],[1,"flex","row","gap-2","w-full"],["type","button",1,"btn","btn-neutral","btn-sm","md:btn-md","flex-1","whitespace-nowrap"],[1,"mt-4","flex","flex-row","items-center","justify-end","w-full","gap-2"],["type","button",1,"btn","btn-ghost",3,"click"],["type","submit",1,"btn","btn-primary"],["type","button",1,"btn","btn-ghost","btn-sm","btn-circle",3,"click"],["name","reset"],["type","button",1,"btn","btn-neutral","btn-sm","md:btn-md","flex-1","whitespace-nowrap",3,"click"]],template:function(i,r){if(i&1){let o=L();h(0,"form",1,0),E("ngSubmit",function(){return C(o),D(r.submit())}),h(2,"div",2)(3,"h3",3),g(4,"ODO"),f(),k(5,Ar,2,0,"button",4),f(),h(6,"label",5)(7,"input",6),he("ngModelChange",function(a){return C(o),de(r.odometer,a)||(r.odometer=a),D(a)}),f(),h(8,"div",7)(9,"span",8),g(10,"km"),f()()(),h(11,"div",9),en(12,wr,2,1,"button",10,Jt),f(),h(14,"div",11)(15,"button",12),E("click",function(){return C(o),D(r.cancel())}),g(16," Cancel "),f(),h(17,"button",13),g(18,"Save"),f()()()}i&2&&(y(5),T(r.showReset()?5:-1),y(2),ue("ngModel",r.odometer),y(5),tn(r.increaseValues))},dependencies:[nt,tt,J,Qe,Je,ke,Pe,Ne,ht,He],encapsulation:2,changeDetection:0})}return n})();var Sr=()=>n=>{try{return new Date(n.value),null}catch{return{invalidDate:{value:n.value}}}},Yn=(()=>{class n{validate=e=>Sr()(e);static \u0275fac=function(i){return new(i||n)};static \u0275dir=b({type:n,selectors:[["","tuDateValidator",""]],features:[W([{provide:Oe,useExisting:n,multi:!0}])]})}return n})();function Xn(n=new Date){let t;return typeof n=="string"?t=new Date(n):t=n,t.toISOString().split("T")[0]}var Mr=["form"];function xr(n,t){n&1&&(h(0,"div",5)(1,"span",15),g(2,"Required"),f()())}var Qn=(()=>{class n{leasingInfoService=_(z);form=ae.required("form");leasingInfo=$(this.leasingInfoService.leasingInfo$);yearlyKmLimit=R(this.leasingInfo()?.yearlyKmLimit);initialOdo=R(this.leasingInfo()?.initialOdo);startDate=R(Xn(this.leasingInfo()?.startDate));submitted=Y();canceled=Y();submit(){if(this.form().invalid){console.log("Invalid form"),console.log(this.form().errors);return}let e={yearlyKmLimit:Number(this.yearlyKmLimit()),initialOdo:Number(this.initialOdo()),startDate:new Date(this.startDate()).toISOString()};this.leasingInfoService.saveLeasingInfo(e),this.submitted.emit()}cancel(){this.canceled.emit()}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=P({type:n,selectors:[["tu-leasing-contract"]],viewQuery:function(i,r){i&1&&le(r.form,Mr,5),i&2&&ce()},outputs:{submitted:"submitted",canceled:"canceled"},decls:33,vars:4,consts:[["form","ngForm"],["startDateControl","ngModel"],[3,"ngSubmit"],[1,"flex","flex-col","gap-2"],[1,"text-2xl","self-start","mb-4"],[1,"label"],[1,"label-text"],[1,"input","input-bordered","w-full","flex","items-center","gap-2"],["required","","tuKmInput","","name","yearly","inputmode","numeric",1,"grow","text-right",3,"ngModelChange","ngModel"],["required","","tuKmInput","","name","startingKm","inputmode","numeric",1,"grow","text-right",3,"ngModelChange","ngModel"],[1,"form-control","w-full"],["required","","type","date","tuDateValidator","","name","startDate",1,"input","input-bordered","w-full","text-right",3,"ngModelChange","ngModel"],[1,"flex","items-center","justify-end","mt-8","gap-2"],["type","button",1,"btn","btn-ghost",3,"click"],["type","submit",1,"btn","btn-primary"],[1,"label-text","text-red-500"]],template:function(i,r){if(i&1){let o=L();h(0,"form",2,0),E("ngSubmit",function(){return C(o),D(r.submit())}),h(2,"div",3)(3,"h3",4),g(4,"Leasing Contract"),f(),h(5,"div")(6,"div",5)(7,"span",6),g(8,"KMs per year"),f()(),h(9,"label",7)(10,"input",8),he("ngModelChange",function(a){return C(o),de(r.yearlyKmLimit,a)||(r.yearlyKmLimit=a),D(a)}),f(),h(11,"span",6),g(12,"km"),f()()(),h(13,"div")(14,"div",5)(15,"span",6),g(16,"Odometer at start"),f()(),h(17,"label",7)(18,"input",9),he("ngModelChange",function(a){return C(o),de(r.initialOdo,a)||(r.initialOdo=a),D(a)}),f(),h(19,"span",6),g(20,"km"),f()()(),h(21,"label",10)(22,"div",5)(23,"span",6),g(24,"Start of contract"),f()(),h(25,"input",11,1),he("ngModelChange",function(a){return C(o),de(r.startDate,a)||(r.startDate=a),D(a)}),f(),k(27,xr,3,0,"div",5),f()(),h(28,"div",12)(29,"button",13),E("click",function(){return C(o),D(r.cancel())}),g(30," Cancel "),f(),h(31,"button",14),g(32,"Save"),f()()()}if(i&2){let o=Be(26);y(10),ue("ngModel",r.yearlyKmLimit),y(8),ue("ngModel",r.initialOdo),y(7),ue("ngModel",r.startDate),y(2),T(o.hasError("required")?27:-1)}},dependencies:[nt,tt,J,Qe,Je,ke,Pe,Ne,Yn,ht],styles:["input[type=date][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{margin-left:.25em}"],changeDetection:0})}return n})();var kt=(()=>{class n{#e=_(z);#t=_(K);analyticsData$=oe([this.#t.findMax().pipe(Bt(e=>!!e?.odo)),this.#e.leasingInfo$]).pipe(Ge(([e,i],[r,o])=>e?.odo===r?.odo&&JSON.stringify(i)===JSON.stringify(o)),F(([e,i])=>this.generateAnalyticsData(e.odo,i)),Wt({bufferSize:1,refCount:!0}));generateAnalyticsData(e,i){let r=i.yearlyKmLimit/365,o=Math.floor((Date.now()-new Date(i.startDate).getTime())/(1e3*3600*24)),l=(e-i.initialOdo)/o>r,c=r*o,u=Math.ceil(Math.abs(e-(i.initialOdo+c))),d=Math.ceil(u/r),m=i.initialOdo+Math.ceil(r*o);return{isDistanceOverExpected:l,differenceFromExpected:u,idleDaysToReachExpectedKm:d,expectedOdo:m}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=te({token:n,factory:n.\u0275fac})}return n})();var Tt={chart:{height:350,type:"line",toolbar:{show:!1},selection:{enabled:!1},zoom:{enabled:!1}},colors:["oklch(var(--a))","oklch(var(--p))"],xaxis:{type:"datetime",labels:{show:!1},axisBorder:{show:!1},axisTicks:{show:!1},crosshairs:{show:!1}},yaxis:{show:!1},dataLabels:{enabled:!1},stroke:{curve:"smooth"},tooltip:{enabled:!1},grid:{xaxis:{lines:{show:!1}},yaxis:{lines:{show:!1}},padding:{top:0,bottom:0}},legend:{show:!0,labels:{colors:"oklch(var(--bc) / 1)"},position:"top",itemMargin:{vertical:15},markers:{offsetX:-2.5,strokeWidth:0}}};function Ir(n,t){if(n&1&&M(0,"apx-chart",0),n&2){let e=t;H("series",e.series)("chart",e.chart)("dataLabels",e.dataLabels)("stroke",e.stroke)("xaxis",e.xaxis)("tooltip",e.tooltip)("grid",e.grid)("legend",e.legend)("yaxis",e.yaxis)("colors",e.colors)}}var Jn=(()=>{class n{analyticsData=N.required();#e=_(K);#t=_(z);chartState=q(()=>{let e=this.series(),i=this.analyticsData();return e?.series?A(I(A({},Tt),{series:e.series,xaxis:I(A({},Tt.xaxis),{categories:e.categories})}),i.isDistanceOverExpected?{colors:["oklch(var(--er))","oklch(var(--p))"]}:{}):null});series=$(oe([this.#t.leasingInfo$,this.#e.findMax(),fe(this.analyticsData)]).pipe(F(([e,i,r])=>({series:[{data:[e.initialOdo,i.odo],name:"Real"},{data:[e.initialOdo,r.expectedOdo],name:"Average"}],categories:[new Date(e.startDate).toISOString(),i.dateTime]}))));static \u0275fac=function(i){return new(i||n)};static \u0275cmp=P({type:n,selectors:[["tu-leasing-chart"]],hostAttrs:[1,"block","shadow-xl","bg-base-200","rounded-2xl"],inputs:{analyticsData:[1,"analyticsData"]},decls:1,vars:1,consts:[[3,"series","chart","dataLabels","stroke","xaxis","tooltip","grid","legend","yaxis","colors"]],template:function(i,r){if(i&1&&k(0,Ir,1,10,"apx-chart",0),i&2){let o;T((o=r.chartState())?0:-1,o)}},dependencies:[cn],encapsulation:2,changeDetection:0})}return n})();var ei=(()=>{class n{elementRef=_(ne);renderer=_(Ve);destroyRef=_(zt);countUp=N.required();duration=N(1e3);suffix=N("");isNegative=N(!1);currentCount$=oe([fe(this.countUp),fe(this.duration),fe(this.isNegative)]).pipe(qt(([e,i,r])=>{let o=$e.now();return r&&(e=-e),Ut(0,$e).pipe(F(()=>$e.now()-o),F(s=>s/i),Kt(s=>s<=1),F(s=>s*(2-s)),F(s=>Math.round(s*e)),Ht(e),F(s=>Intl.NumberFormat("de-DE").format(s)),Ge())}));ngOnInit(){this.displayCurrentCount()}displayCurrentCount(){this.currentCount$.pipe(ln(this.destroyRef),F(e=>this.suffix()?e+" "+this.suffix():e)).subscribe(e=>{this.renderer.setProperty(this.elementRef.nativeElement,"innerHTML",e)})}static \u0275fac=function(i){return new(i||n)};static \u0275dir=b({type:n,selectors:[["","countUp",""]],inputs:{countUp:[1,"countUp"],duration:[1,"duration"],suffix:[1,"suffix"],isNegative:[1,"isNegative"]}})}return n})();function Fr(n,t){n&1&&(h(0,"div",7),g(1,"Behind"),f(),h(2,"div",4),g(3,"You should rest for a few days!"),f())}function Or(n,t){n&1&&(h(0,"div",8),g(1,"Ahead"),f(),h(2,"div",4),g(3,"You're doing great so far!"),f())}var ti=(()=>{class n{totalKm=N.required();difference=N.required();differenceInDays=N.required();isOverExpected=N.required();static \u0275fac=function(i){return new(i||n)};static \u0275cmp=P({type:n,selectors:[["tu-summary"]],hostAttrs:[1,"w-full","block"],inputs:{totalKm:[1,"totalKm"],difference:[1,"difference"],differenceInDays:[1,"differenceInDays"],isOverExpected:[1,"isOverExpected"]},decls:17,vars:11,consts:[[1,"stats","stats-vertical","md:stats-horizontal","shadow-xl","bg-base-200","w-full"],[1,"stat","max-md:place-items-center"],[1,"stat-title"],["suffix","km",1,"stat-value","text-primary",3,"countUp","duration"],[1,"stat-desc"],["suffix","km",1,"stat-value",3,"countUp","duration","isNegative"],["suffix","Days",1,"stat-value",3,"countUp"],[1,"stat-title","text-error"],[1,"stat-title","text-secondary"]],template:function(i,r){i&1&&(h(0,"div",0)(1,"div",1)(2,"div",2),g(3,"Total"),f(),M(4,"div",3),h(5,"div",4),g(6,"Total kilometers driven"),f()(),h(7,"div",1)(8,"div",2),g(9,"Difference"),f(),M(10,"div",5),h(11,"div",4),g(12,"From expected leasing mileage"),f()(),h(13,"div",1),M(14,"div",6),k(15,Fr,4,0)(16,Or,4,0),f()()),i&2&&(y(4),H("countUp",r.totalKm())("duration",1500),y(6),Ae("text-accent",!r.isOverExpected())("text-error",r.isOverExpected()),H("countUp",r.difference())("duration",2e3)("isNegative",r.isOverExpected()),y(4),H("countUp",r.differenceInDays()),y(),T(r.isOverExpected()?15:16))},dependencies:[ei],encapsulation:2,changeDetection:0})}return n})();var ni=(()=>{class n{addEntryClicked=Y();static \u0275fac=function(i){return new(i||n)};static \u0275cmp=P({type:n,selectors:[["tu-empty-odo-state"]],outputs:{addEntryClicked:"addEntryClicked"},decls:9,vars:0,consts:[[1,"hero","bg-base-200","rounded-box","py-8"],[1,"hero-content","text-center"],[1,"max-w-md"],[1,"text-3xl","font-bold"],[1,"py-6"],[1,"btn","btn-primary",3,"click"]],template:function(i,r){i&1&&(h(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),g(4,"No ODO Entries Yet"),f(),h(5,"p",4),g(6," It looks like you haven't added any odometer entries. Click the button below to add your first entry! "),f(),h(7,"button",5),E("click",function(){return r.addEntryClicked.emit()}),g(8," Add ODO Entry "),f()()()())},encapsulation:2,changeDetection:0})}return n})();var Nr=["modal"];function Pr(n,t){if(n&1&&(h(0,"div"),M(1,"tu-summary",12),f()),n&2){j();let e=_t(0),i=_t(1);y(),H("totalKm",i.odo)("difference",e.differenceFromExpected)("differenceInDays",e.idleDaysToReachExpectedKm)("isOverExpected",e.isDistanceOverExpected)}}function kr(n,t){if(n&1){let e=L();h(0,"tu-empty-odo-state",13),E("addEntryClicked",function(){C(e);let r=j();return D(r.openEntryModal())}),f()}}function Tr(n,t){if(n&1){let e=L();h(0,"tu-add-odo-form",14),E("submitted",function(){C(e);let r=j(2);return D(r.closeModal())})("canceled",function(){C(e);let r=j(2);return D(r.closeModal())}),f()}}function Rr(n,t){if(n&1){let e=L();h(0,"tu-leasing-contract",14),E("submitted",function(){C(e);let r=j(2);return D(r.leasingInfoSaved())})("canceled",function(){C(e);let r=j(2);return D(r.closeModal())}),f()}}function Lr(n,t){n&1&&(h(0,"p"),g(1,"Unknown dialog component"),f())}function jr(n,t){if(n&1&&k(0,Tr,1,0,"tu-add-odo-form")(1,Rr,1,0,"tu-leasing-contract")(2,Lr,2,0,"p"),n&2){let e,i=j();T((e=i.dialogComponent())==="add"?0:e==="leasingContract"?1:2)}}var qs=(()=>{class n{modal=ae.required("modal");dialogComponent=R(null);#e=_(z);#t=_(K);#n=_(kt);entries=$(this.#t.findAll(),{initialValue:[]});leasingInfo=$(this.#e.leasingInfo$);latestOdoEntry=$(this.#t.findMax());analyticsData=$(this.#n.analyticsData$,{initialValue:{differenceFromExpected:0,expectedOdo:0,idleDaysToReachExpectedKm:0,isDistanceOverExpected:!1}});openEntryModal(){this.modal().nativeElement.showModal(),this.dialogComponent.set("add")}openLeasingInfoModal(){this.modal().nativeElement.showModal(),this.dialogComponent.set("leasingContract")}leasingInfoSaved(){this.closeModal()}closeModal(){this.modal().nativeElement.close(),this.dialogComponent.set(null)}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=P({type:n,selectors:[["tu-dashboard-page"]],viewQuery:function(i,r){i&1&&le(r.modal,Nr,5),i&2&&ce()},features:[W([K,z,kt])],decls:19,vars:5,consts:[["modal",""],[1,"navbar"],[1,"flex-1"],[1,"btn","btn-circle","flex-none",3,"click"],["name","cog"],[1,"flex","flex-col","gap-8","max-sm:px-4"],[3,"analyticsData"],[1,"fixed","right-8","bottom-8","shadow-xl"],[1,"btn-circle","btn","btn-accent","btn-lg",3,"click"],["name","plus","size","36"],[1,"modal"],[1,"modal-box"],[3,"totalKm","difference","differenceInDays","isOverExpected"],[3,"addEntryClicked"],[3,"submitted","canceled"]],template:function(i,r){if(i&1){let o=L();rn(0)(1),h(2,"header")(3,"nav",1),M(4,"div",2),h(5,"button",3),E("click",function(){return C(o),D(r.openLeasingInfoModal())}),M(6,"fast-svg",4),f()()(),h(7,"main",5),k(8,Pr,2,4,"div")(9,kr,1,0,"tu-empty-odo-state"),h(10,"div"),M(11,"tu-leasing-chart",6),f(),h(12,"div",7)(13,"button",8),E("click",function(){return C(o),D(r.openEntryModal())}),M(14,"fast-svg",9),f()()(),h(15,"dialog",10,0)(17,"div",11),k(18,jr,3,1),f()()}if(i&2){let o=Be(16),s=vt(r.analyticsData());y();let a=vt(r.latestOdoEntry());y(7),T(a!=null&&a.odo?8:9),y(3),H("analyticsData",s),y(7),T(o.open&&r.dialogComponent()?18:-1)}},dependencies:[He,Zn,Qn,Jn,ti,ni],encapsulation:2,changeDetection:0})}return n})();export{qs as default};
